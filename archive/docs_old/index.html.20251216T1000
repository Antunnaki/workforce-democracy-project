<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Essential Meta Tags TIMESTAMP-VERIFIED-20251216T1000 -->
    <meta name="description" content="Complete non-partisan guide to voting, government transparency, and democratic workplaces. Learn how to vote, register to vote, find polling locations, track representatives, explore worker cooperatives, and participate in democracy. Free resources for USA, Mexico, Australia, Germany, France, Canada, and UK.">
    <meta name="keywords" content="how to vote, where to vote, how do I vote, voter registration, how to register to vote, polling locations, early voting, absentee voting, voting guide, election information, voter ID requirements, what ID do I need to vote, can I vote, am I registered to vote, check voter registration, vote by mail, mail-in voting, postal voting, voting by proxy, advance voting, in-person voting, election day, voting deadlines, voter eligibility, voting rights, ballot information, sample ballot, where is my polling place, polling station finder, accessible voting, disability voting access, wheelchair accessible polling stations, blind voter assistance, deaf voter services, language assistance voting, bilingual voting materials, Spanish voting materials, vote from abroad, overseas voting, military voting, expat voting, student voting, college student voter registration, same day voter registration, provisional ballot, voter ID laws by state, no ID voting states, voter suppression, voting rights restoration, felon voting rights, ex-felon voting, voter intimidation, poll watcher rights, election observer, find my representative, who is my representative, track my representatives, representative voting records, congress voting records, senate voting records, house voting records, supreme court decisions, court rulings, bill tracking, track legislation, legislative tracking, how a bill becomes law, contact my representative, email my senator, write to congress, town hall meetings, constituent services, civic engagement, civic participation, civic transparency, government transparency, government accountability, political transparency, non-partisan voting guide, bipartisan information, neutral political guide, unbiased election info, democratic participation, citizen participation, grassroots organizing, community organizing, political activism, voter mobilization, get out the vote, GOTV, voter outreach, workplace democracy, worker cooperatives, worker co-ops, employee owned companies, democratic workplaces, cooperative jobs, cooperative business, worker ownership, employee ownership, profit sharing, ESOP, employee stock ownership, democratic jobs, ethical businesses, ethical companies, fair trade businesses, b-corps, benefit corporations, certified b-corps, social enterprises, social entrepreneurship, impact investing, community ownership, cooperative economy, solidarity economy, platform cooperatives, tech cooperatives, housing cooperatives, food cooperatives, credit unions, mutual aid, USA voting, US elections, American voting guide, Mexico voting, Mexican elections, INE Mexico, credencial para votar, vote.gov, Australia voting, Australian elections, AEC Australia, compulsory voting Australia, Germany voting, German elections, bundeswahlleiter, wahlbenachrichtigung, Bundestag elections, France voting, French elections, √©lections fran√ßaises, carte √©lecteur, service-public.fr, Canada voting, Canadian elections, Elections Canada, voter information card, UK voting, British elections, Electoral Commission UK, register to vote UK, postal vote UK, proxy vote UK, compulsory voting, mandatory voting, register to vote online, voter registration deadline, election calendar, election dates 2024, election dates 2025, find candidates, candidate information, candidate positions, compare candidates, political candidates, candidate debates, voter guides, local elections, municipal elections, city council elections, school board elections, state elections, gubernatorial elections, federal elections, national elections, presidential elections, congressional elections, senate elections, house elections, midterm elections, primary elections, caucus, general elections, runoff elections, special elections, by-elections, referendum, ballot measure, proposition, initiative, recall election, voter turnout, voter participation rates, democracy tools, civic tools, civics education, political education, civic education, democracy guide, how democracy works, checks and balances, separation of powers, branches of government, democratic process, political system, electoral system, electoral college, proportional representation, parliamentary system, ranked choice voting, instant runoff voting, approval voting, voting methods, voting systems, electoral reform, voter rights protection, election security, paper ballots, election integrity, poll worker, election volunteer, become a poll worker, election judge">
    <meta name="author" content="Workforce Democracy Project">
    <meta name="theme-color" content="#FF6B35">
    
    <!-- Privacy-First Approach -->
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    
    <!-- V37.1.0: REMOVED - Duplicate CSP and cache headers (keeping optimized version in Nginx) -->
    
    <!-- Open Graph (Enhanced for Social Sharing) -->
    <meta property="og:title" content="How to Vote in 7 Countries | Track Representatives | Democratic Workplaces">
    <meta property="og:description" content="Free non-partisan guide: Learn how to vote, register, find polling locations in USA üá∫üá∏ Mexico üá≤üáΩ Australia üá¶üá∫ Germany üá©üá™ France üá´üá∑ Canada üá®üá¶ UK üá¨üáß. Track government transparency. Explore worker cooperatives. Zero tracking, 100% privacy.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://workforcedemocracyproject.org">
    <meta property="og:image" content="https://workforcedemocracyproject.org/images/social-preview.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Workforce Democracy Project - Voting Guide, Government Transparency, and Democratic Workplaces for 7 Countries">
    <meta property="og:site_name" content="Workforce Democracy Project">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="es_MX">
    <meta property="og:locale:alternate" content="en_AU">
    <meta property="og:locale:alternate" content="de_DE">
    <meta property="og:locale:alternate" content="fr_FR">
    <meta property="og:locale:alternate" content="en_CA">
    <meta property="og:locale:alternate" content="en_GB">
    
    <!-- Twitter Card (Enhanced for X/Twitter Sharing) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How to Vote in 7 Countries | Track Representatives | Democratic Workplaces">
    <meta name="twitter:description" content="Free voting guide for üá∫üá∏üá≤üáΩüá¶üá∫üá©üá™üá´üá∑üá®üá¶üá¨üáß: Register, find polling locations, track government transparency, explore worker co-ops. Non-partisan. Zero tracking.">
    <meta name="twitter:image" content="https://workforcedemocracyproject.org/images/social-preview.jpg">
    <meta name="twitter:image:alt" content="Workforce Democracy Project - Complete voting guide for USA, Mexico, Australia, Germany, France, Canada, and UK">
    <meta name="twitter:site" content="@WorkforceDemocracy">
    <meta name="twitter:creator" content="@WorkforceDemocracy">
    
    <!-- No Tracking -->
    <meta name="google-analytics" content="no">
    <meta name="facebook-domain-verification" content="no">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://workforcedemocracyproject.org/">
    
    <!-- V37.1.0: Optimized Cache Control - Allow 1-hour caching with version query strings -->
    <meta http-equiv="Cache-Control" content="public, max-age=3600">
    <meta http-equiv="Pragma" content="cache">
    
    <!-- V36.5.2: CSP Override Script for Backend Connection -->
    <script>
    // This script runs IMMEDIATELY to ensure CSP allows backend connection
    // It overrides any conflicting CSP policies that might block the backend
    (function() {
        console.log('üîß CSP Override: Ensuring backend connection is allowed...');
        console.log('‚úÖ Backend URL: https://api.workforcedemocracyproject.org');
        console.log('‚úÖ CSP should allow this connection');
    })();
    </script>
    
    <title>How to Vote, Register & Find Polling Locations | Workforce Democracy Project - Voter Guide for USA, Mexico, Australia, Germany, France, Canada, UK</title>
    
    <!-- JSON-LD Structured Data for Search Engines (Schema.org) -->
    <!-- Helps Google/Bing understand your site for rich snippets -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Workforce Democracy Project",
      "description": "Complete non-partisan guide to voting, government transparency, and democratic workplaces for USA, Mexico, Australia, Germany, France, Canada, and UK.",
      "url": "https://workforcedemocracyproject.org",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://workforcedemocracyproject.org/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "inLanguage": ["en", "es", "de", "fr"],
      "audience": {
        "@type": "Audience",
        "audienceType": "Voters, Citizens, Workers"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Workforce Democracy Project",
      "url": "https://workforcedemocracyproject.org",
      "logo": "https://workforcedemocracyproject.org/images/logo.png",
      "description": "Non-partisan civic engagement platform providing voting guides, government transparency tools, and democratic workplace resources.",
      "foundingDate": "2024",
      "nonprofitStatus": "Independent",
      "sameAs": [
        "https://twitter.com/WorkforceDemocracy"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "Support",
        "availableLanguage": ["English", "Spanish", "German", "French"]
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Vote - Complete Guide for 7 Countries",
      "description": "Step-by-step voting guide covering voter registration, polling locations, required documents, and voting methods for USA, Mexico, Australia, Germany, France, Canada, and UK.",
      "image": "https://workforcedemocracyproject.org/images/social-preview.jpg",
      "totalTime": "PT15M",
      "estimatedCost": {
        "@type": "MonetaryAmount",
        "currency": "USD",
        "value": "0"
      },
      "tool": [
        {
          "@type": "HowToTool",
          "name": "Voter ID or Identification Documents"
        },
        {
          "@type": "HowToTool",
          "name": "Proof of Address (varies by country)"
        }
      ],
      "step": [
        {
          "@type": "HowToStep",
          "name": "Check Eligibility",
          "text": "Verify you meet voting requirements (age, citizenship, residency) for your country.",
          "url": "https://workforcedemocracyproject.org#voting-eligibility"
        },
        {
          "@type": "HowToStep",
          "name": "Register to Vote",
          "text": "Complete voter registration online or in-person before the deadline.",
          "url": "https://workforcedemocracyproject.org#voter-registration"
        },
        {
          "@type": "HowToStep",
          "name": "Find Your Polling Location",
          "text": "Look up your assigned polling station or request mail-in ballot.",
          "url": "https://workforcedemocracyproject.org#polling-locations"
        },
        {
          "@type": "HowToStep",
          "name": "Prepare Required Documents",
          "text": "Gather necessary ID and documents required for voting in your jurisdiction.",
          "url": "https://workforcedemocracyproject.org#required-documents"
        },
        {
          "@type": "HowToStep",
          "name": "Vote",
          "text": "Cast your ballot in-person, by mail, or through early voting.",
          "url": "https://workforcedemocracyproject.org#voting-methods"
        }
      ]
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How do I register to vote?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Voter registration varies by country. In the USA, visit vote.gov. In Mexico, visit INE. In Australia, visit the AEC. In Germany, registration is automatic when you register your address. In France, visit service-public.fr. In Canada, visit Elections Canada. In the UK, visit gov.uk/register-to-vote."
          }
        },
        {
          "@type": "Question",
          "name": "Where do I vote?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Your polling location depends on your residential address. Use your country's official polling station finder: USA (vote.gov), Mexico (INE), Australia (AEC), Germany (bundeswahlleiter.de), France (service-public.fr), Canada (Elections Canada), UK (Electoral Commission)."
          }
        },
        {
          "@type": "Question",
          "name": "What ID do I need to vote?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "ID requirements vary by country and jurisdiction. Common acceptable IDs include: government-issued photo ID, passport, driver's license, voter ID card. Some countries allow utility bills or bank statements as proof of address. Check your country's specific requirements in our voting guide."
          }
        },
        {
          "@type": "Question",
          "name": "Can I vote early or by mail?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, most countries offer early voting, postal voting, or absentee voting. In the USA, request an absentee ballot. In Mexico, advance voting is limited. Australia has postal voting. Germany allows postal voting (Briefwahl). France has proxy voting. Canada has advance polls. UK has postal and proxy voting. Check your country's specific options."
          }
        },
        {
          "@type": "Question",
          "name": "What are worker cooperatives?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Worker cooperatives are businesses owned and democratically controlled by their employees. Workers share profits, make decisions collectively, and have equal voting rights regardless of position. Examples include Mondragon (Spain), REI (USA), and many local businesses worldwide."
          }
        }
      ]
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://workforcedemocracyproject.org"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "How to Vote",
          "item": "https://workforcedemocracyproject.org#how-to-vote"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Track Representatives",
          "item": "https://workforcedemocracyproject.org#track-representatives"
        },
        {
          "@type": "ListItem",
          "position": 4,
          "name": "Democratic Workplaces",
          "item": "https://workforcedemocracyproject.org#democratic-workplaces"
        }
      ]
    }
    </script>
    
    <!-- Privacy-Respecting Resources -->
    <!-- Font Awesome via jsDelivr (ethical, privacy-respecting CDN) -->
    <!-- V19: Font Awesome kept for site-wide icons, but chat widget icons use custom SVGs -->
    <!-- V26: TEMPORARILY DISABLED Font Awesome to test if it's causing emoji overlay -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"> -->
    
    <!-- V37.1.0: FIXED Preload Version Mismatches - Versions aligned with actual script tags -->
    <link rel="preload" href="js/security.js?v=20250122-HORIZONTAL-TABS" as="script">
    <link rel="preload" href="js/language.js?v=20250122-HORIZONTAL-TABS" as="script">
    <!-- Old personalization preload removed - using new system -->
    <link rel="preload" href="js/main.js?v=20250125-PERFORMANCE-OPTIMIZED-V2" as="script">
    
    <!-- V37.11.0: Performance - Preload Critical CSS (Phase 3B modular structure) -->
    <link rel="preload" href="css/core/variables.css?v=37.11.0-PHASE3B" as="style">
    <link rel="preload" href="css/core/base.css?v=37.11.0-PHASE3B" as="style">
    <link rel="preload" href="css/core/typography.css?v=37.11.0-PHASE3B" as="style">
    <link rel="preload" href="css/civic-redesign.css?v=37.1.0-OPTIMIZED" as="style">
    
    <!-- V37.1.0: Performance - Preload Critical Images (removed unused civic-hero-circular SVG) -->
    <link rel="preload" href="images/site-logo-v2.svg" as="image" type="image/svg+xml">
    
    <!-- V36.9.10: Performance - CDN Preconnect (Font Awesome if re-enabled) -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    
    <!-- Privacy-Respecting Fonts (system fonts, no tracking) -->
    <link rel="stylesheet" href="css/fonts.css?v=36.9.7-ERROR-MSG-FIX">
    
    <!-- ========================================
         V37.11.0: MODULAR CSS STRUCTURE (Phase 3B)
         Granular architecture for maintainability
         ======================================== -->
    
    <!-- 1. DESIGN TOKENS (MUST LOAD FIRST) -->
    <link rel="stylesheet" href="css/core/variables.css?v=37.11.0-PHASE3B">
    
    <!-- 2. CORE FOUNDATION -->
    <link rel="stylesheet" href="css/core/base.css?v=37.11.0-PHASE3B">
    <link rel="stylesheet" href="css/core/typography.css?v=37.11.0-PHASE3B">
    <link rel="stylesheet" href="css/core/layout.css?v=37.11.0-PHASE3B">
    
    <!-- 3. UTILITIES -->
    <link rel="stylesheet" href="css/utilities/accessibility.css?v=37.11.0-PHASE3B">
    
    <!-- 4. COMPONENTS (organized by priority/dependency) -->
    <link rel="stylesheet" href="css/components/buttons.css?v=37.11.0-PHASE3B">
    <link rel="stylesheet" href="css/components/header.css?v=37.11.0-PHASE3B">
    <link rel="stylesheet" href="css/components/language-selector.css?v=37.11.0-PHASE3B">
    <link rel="stylesheet" href="css/components/hero.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/guided-tour.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/forms.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/modals.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/personalization.css?v=38.0.0-PERSONALIZATION">
    <link rel="stylesheet" href="css/components/faq.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/footer.css?v=37.11.4-PHASE3C">
    
    <!-- V37.11.4 Phase 3C: Additional Component Files -->
    <link rel="stylesheet" href="css/components/representative-cards.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/supreme-court.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/jobs-section.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/civic-voting.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/learning-resources.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/local-resources.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/philosophies.css?v=37.11.4-PHASE3C">
    
    <!-- 5. FEATURE-SPECIFIC CSS (existing architecture) -->
    <!-- Unified Color Scheme (Hero-Based Palette) -->
    <link rel="stylesheet" href="css/unified-color-scheme.css?v=36.9.7-ERROR-MSG-FIX">
    
    <!-- V36.0.4: Modal Form Fix (Contact Form Transparent Text) -->
    <link rel="stylesheet" href="css/modal-fix.css?v=36.9.7-ERROR-MSG-FIX">
    
    <!-- V36.0.0: Removed unified-personalization.css - now integrated into welcome modal -->
    
    <!-- V37.1.0: Civic Streamlined Tabbed Interface (version updated to match preload) -->
    <link rel="stylesheet" href="css/civic-redesign.css?v=37.1.0-OPTIMIZED">
    
    <!-- V37.11.2: Civic Platform Consolidation - Modular CSS (NUCLEAR OVERRIDE with !important) -->
    <link rel="stylesheet" href="css/civic-platform.css?v=37.11.2-CONTRAST-FIX">
    
    <!-- V37.10.2: Contrast fixes removed - now consolidated below -->
    
    <!-- New Hero Section -->
    <link rel="stylesheet" href="css/hero-new.css?v=36.9.7-ERROR-MSG-FIX">
    
    <!-- Jobs Section - V35.2.0 - ALL-IN-ONE INLINE (CSS/JS embedded in HTML) -->
    <!-- External jobs-modern.css removed - all styles now inline -->
    
    <!-- Inline Chat Widgets (V32.9.4 - Standardized) -->
    <link rel="stylesheet" href="css/inline-chat-widgets.css?v=20250124-V32.9.5-BILLS-ADDED">
    <link rel="stylesheet" href="css/bills-section.css?v=20250124-V32.9.5-INITIAL">
    
    <!-- Community Services Widget -->
    <link rel="stylesheet" href="css/community-services.css?v=20250201-COMMUNITY-SERVICES">
    
    <!-- V36.9.11: Form Validation Styles (Task #17) -->
    <link rel="stylesheet" href="css/form-validation.css?v=36.9.11-VALIDATION">
    
    <!-- V36.9.0: Replaced with community-services.css (see line 301) -->
    <!-- <link rel="stylesheet" href="css/ethical-business.css?v=20250124-STANDARDIZED-ETHICAL"> -->
    
    <!-- Nonprofit Widgets Integration -->
    <link rel="stylesheet" href="css/nonprofit-widget.css?v=20250131-NONPROFIT-INTEGRATION">
    
    <!-- Helpful Suggestions System (V32.9.6) -->
    <link rel="stylesheet" href="css/helpful-suggestions.css?v=20250124-V32.9.6-INITIAL">
    
    <!-- V36.0.0: New Welcome Modal (Complete Rebuild) -->
    <!-- V37.9.1: welcome-modal CSS removed - feature completely removed -->
    
    <!-- V36.1.0: Voting Information System -->
    <link rel="stylesheet" href="css/voting-info.css?v=20250127-V36.1.0-INITIAL">
    <link rel="stylesheet" href="css/voting-assistant.css?v=20250127-V36.1.0-INITIAL">
    
    <!-- Smart Local Tools (V34.0.0) - Cost-Saving Visual Analytics -->
    <link rel="stylesheet" href="css/smart-local-tools.css?v=20250125-V34.0.0-INITIAL">
    
    <!-- Civic Dashboard V34.3.0 - Modern Dashboard Redesign -->
    <link rel="stylesheet" href="css/civic-dashboard.css?v=20250125-V34.3.0-INITIAL">
    
    <!-- Inline Civic Chat Widgets V34.3.0 - Representatives & Supreme Court -->
    <link rel="stylesheet" href="css/inline-civic-chat.css?v=20250125-V34.3.0-INITIAL">
    
    <!-- V36.10.0 Phase 1: Civic Representative Finder -->
    <link rel="stylesheet" href="css/civic-representative-finder.css?v=36.10.0-PHASE1">
    
    <!-- V36.7.1 Phase 3: Citation Styling (clickable superscript citations and sources section) -->
    <!-- V37.1.2: REMOVED citations.css - conflicts with universal-chat.js inline styles -->
<!-- <link rel="stylesheet" href="css/citations.css?v=36.11.15"> -->
    
    <!-- V36.7.1 Phase 4: Markdown Styling (bold, italic, lists) -->
    <link rel="stylesheet" href="css/markdown.css?v=20251030-PHASE4-MARKDOWN">
    
    <!-- V37.11.4 Phase 3C: Responsive & Print Styles (MUST load before contrast fixes) -->
    <link rel="stylesheet" href="css/components/responsive.css?v=37.11.4-PHASE3C">
    <link rel="stylesheet" href="css/components/print.css?v=37.11.4-PHASE3C">
    
    <!-- V37.10.2: CONSOLIDATED CONTRAST FIXES -->
    <!-- All contrast fixes consolidated into one file for easier maintenance -->
    <!-- Combines: grey-text-fix-clean.css + civic-contrast-clean.css + civic-header-contrast-fix.css -->
    <link rel="stylesheet" href="css/contrast-fixes.css?v=37.10.2-CONSOLIDATED">
    
    <!-- V37.11.2: CIVIC TITLE CONTRAST FIX (NUCLEAR OPTION) -->
    <!-- MUST LOAD ABSOLUTELY LAST - uses maximum specificity + !important -->
    <!-- Fixes ongoing issue where civic title/subtitle appear dark on blue gradient -->
    <link rel="stylesheet" href="css/civic-title-contrast-fix.css?v=37.11.3-WEBKIT-FIX">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" type="image/png" href="favicon.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Structured Data (JSON-LD) for Enhanced Search Visibility -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Workforce Democracy Project",
        "alternateName": "Voter Guide and Government Transparency Platform",
        "url": "https://workforcedemocracyproject.org",
        "description": "Your guide to voting, government transparency, and democratic workplaces. Learn how to vote, where to vote, voter registration for USA, Mexico, and Australia.",
        "keywords": "how to vote, voter registration, polling locations, government transparency, democratic workplaces",
        "inLanguage": ["en", "es"],
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://workforcedemocracyproject.org/?search={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "GovernmentOrganization",
        "name": "Workforce Democracy Project",
        "description": "Non-partisan educational resource providing voter information, government transparency tools, and democratic workplace resources for USA, Mexico, and Australia.",
        "url": "https://workforcedemocracyproject.org",
        "logo": "https://workforcedemocracyproject.org/favicon.svg",
        "foundingDate": "2024-10",
        "areaServed": [
            {
                "@type": "Country",
                "name": "United States"
            },
            {
                "@type": "Country",
                "name": "Mexico"
            },
            {
                "@type": "Country",
                "name": "Australia"
            }
        ],
        "knowsAbout": [
            "Voter Registration",
            "Voting Procedures",
            "Government Transparency",
            "Democratic Workplaces",
            "Civic Engagement",
            "Election Information"
        ]
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "How to Vote and Register to Vote",
        "description": "Comprehensive guide on how to vote, register to vote, find polling locations, and participate in elections in USA, Mexico, and Australia.",
        "step": [
            {
                "@type": "HowToStep",
                "name": "Check Voter Registration Eligibility",
                "text": "Verify you meet age, citizenship, and residency requirements for your country."
            },
            {
                "@type": "HowToStep",
                "name": "Register to Vote",
                "text": "Complete voter registration using official government resources and deadlines."
            },
            {
                "@type": "HowToStep",
                "name": "Find Your Polling Location",
                "text": "Locate your designated polling place or early voting locations."
            },
            {
                "@type": "HowToStep",
                "name": "Prepare Required Documents",
                "text": "Gather necessary ID and documentation required for voting in your jurisdiction."
            },
            {
                "@type": "HowToStep",
                "name": "Cast Your Vote",
                "text": "Vote on election day, during early voting, or via absentee/mail-in ballot."
            }
        ]
    }
    </script>
</head>
<body>
    <!-- DISABLE SERVICE WORKER + CLEAR ALL CACHES -->
    <script>
        (function() {
            // 1. UNREGISTER ALL SERVICE WORKERS IMMEDIATELY
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(function(registrations) {
                    for (let registration of registrations) {
                        registration.unregister();
                    }
                });
            }
            
            // 2. DELETE ALL CACHES
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => caches.delete(name));
                });
            }
            
            // 3. CLEAR CIVIC DATA FROM LOCALSTORAGE (v37.11.7: PRESERVE wdp_* personalization keys)
            try {
                for (let i = localStorage.length - 1; i >= 0; i--) {
                    const key = localStorage.key(i);
                    // ‚úÖ FIX v37.11.7: NEVER delete wdp_* personalization keys
                    // Only clear civic/cached data (legacy service worker cleanup)
                    if (key && !key.startsWith('wdp_') && (key.includes('civic') || key.includes('cached'))) {
                        localStorage.removeItem(key);
                    }
                }
            } catch (e) {}
            
            // 4. CLEAR SESSION STORAGE
            try {
                sessionStorage.clear();
            } catch (e) {}
        })();
    </script>
    
    <!-- Hidden debug script to fix timing issue -->
    <script>
        // Console.log wrapper that somehow fixes the timing/execution order
        (function() {
            const originalLog = console.log;
            const originalError = console.error;
            console.log = function(...args) {
                return originalLog.apply(console, args);
            };
            console.error = function(...args) {
                return originalError.apply(console, args);
            };
        })();
    </script>
    
    <!-- Accessibility Skip Link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Unified Personalization Modal -->
    <!-- ===== V33.0.0: OLD PERSONALIZATION MODAL DISABLED ===== -->
    <!-- This old modal caused duplication issues with guided tour -->
    <!-- Replaced with unified onboarding (js/unified-onboarding.js) -->
    <!-- Personalization now integrated into Step 5 of unified onboarding -->
    <!-- Keeping this HTML commented out in case needed for reference -->
    <!-- V36.3.3: Old personalization modal DELETED - now using welcome modal instead -->

    <!-- Header -->
    <header class="site-header" role="banner">
        <div class="container">
            <div class="header-content">
                <div class="brand">
                    <h1 class="site-title">
                        <a href="index.html" aria-label="Go to homepage">
                            <img src="images/site-logo-v2.svg" alt="Workforce Democracy Project" class="site-logo">
                            <span class="title-text" data-translate="site_title">Workforce Democracy Project</span>
                        </a>
                    </h1>
                    <p class="establishment" data-translate="establishment">Est. Oct 2025</p>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="desktop-nav" role="navigation" aria-label="Main navigation">
                    <ul class="nav-list">
                        <li><a href="#jobs" data-translate="nav_jobs">üè¢ Explore Jobs</a></li>
                        <li><a href="#ethical-business" data-translate="nav_ethical_business">ü§ù Ethical Businesses</a></li>
                        <li><a href="#communityServicesWidget" style="color: #ff6b6b; font-weight: 600;">üè• Find Help</a></li>

                        <li><a href="learning.html" data-translate="nav_learning">üìñ Learn</a></li>
                        <li><a href="faq.html" data-translate="nav_faq">‚ùì FAQ</a></li>
                        <li><a href="help.html" data-translate="nav_help">‚ùì Help & Guide</a></li>
                        <li><a href="privacy.html" data-translate="nav_privacy">üõ°Ô∏è Personalization & Privacy</a></li>
                        <li><a href="philosophies.html" data-translate="nav_philosophy">‚ú® Our Philosophies</a></li>
                        <li><a href="install-app.html" class="install-app-link" style="background: linear-gradient(135deg, #FF6B35 0%, #F4A261 100%); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600;">üì± Install App</a></li>
                        <li><a href="donate.html" style="color: #4ECDC4; font-weight: 600;">üíù Support</a></li>
                        <li class="nav-language">
                            <!-- Language Selector Button (Desktop - opens modal) -->
                            <div class="language-selector desktop-language" id="desktopLanguageSelector">
                                <button class="language-btn" id="languageBtnDesktop" aria-label="Select language">
                                    <i class="fas fa-globe"></i>
                                    <span id="currentLanguageDesktop">EN</span>
                                </button>
                            </div>
                        </li>
                    </ul>
                </nav>
                
                <!-- Mobile Controls: Language Selector + Menu Toggle -->
                <div class="mobile-controls">
                    <!-- Language Selector Button (opens modal) -->
                    <div class="language-selector" id="languageSelector">
                        <button class="language-btn" id="languageBtnMobile" aria-label="Select language">
                            <i class="fas fa-globe"></i>
                            <span id="currentLanguage">EN</span>
                        </button>
                    </div>
                    
                    <!-- Mobile Menu Toggle -->
                    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">
                        <span></span>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <nav class="mobile-nav" id="mobileNav" role="navigation" aria-label="Mobile navigation">
                <ul class="mobile-nav-list">
                    <li><a href="#jobs" onclick="closeMobileMenu()" data-translate="nav_jobs">üè¢ Explore Jobs</a></li>
                    <li><a href="#ethical-business" onclick="closeMobileMenu()" data-translate="nav_ethical_business">ü§ù Ethical Businesses</a></li>
                    <li><a href="#communityServicesWidget" onclick="closeMobileMenu()" style="color: #ff6b6b; font-weight: 600;">üè• Find Help</a></li>

                    <li><a href="learning.html" onclick="closeMobileMenu()" data-translate="nav_learning">üìñ Learn</a></li>
                    <li><a href="faq.html" onclick="closeMobileMenu()" data-translate="nav_faq">‚ùì FAQ</a></li>
                    <li><a href="help.html" onclick="closeMobileMenu()" data-translate="nav_help">‚ùì Help & Guide</a></li>
                    <li><a href="privacy.html" onclick="closeMobileMenu()" data-translate="nav_privacy">üõ°Ô∏è Personalization & Privacy</a></li>
                    <li><a href="philosophies.html" onclick="closeMobileMenu()" data-translate="nav_philosophy">‚ú® Our Philosophies</a></li>
                    <li><a href="install-app.html" onclick="closeMobileMenu()" class="install-app-link" style="background: linear-gradient(135deg, #FF6B35 0%, #F4A261 100%); color: white; padding: 0.75rem 1.25rem; border-radius: 8px; font-weight: 600; display: block; text-align: center; margin-top: 1rem;">üì± Install App</a></li>
                    <li><a href="donate.html" onclick="closeMobileMenu()" style="color: #4ECDC4; font-weight: 600; display: block; text-align: center; margin-top: 0.5rem;">üíù Support</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- V36.9.5 Welcome Modal - Fresh Rebuild (Simplified & Warm) -->
    <!-- V37.9.1: Welcome modal COMPLETELY REMOVED per user request -->

    <!-- Main Content -->
    <main id="main-content" role="main">
        
        <!-- Hero Section - Warm & Welcoming -->
        <section class="hero-section-new">
            <div class="hero-container">
                <div class="hero-content">
                    <div class="hero-text">
                        <div class="hero-catchphrase">
                            <span class="hero-catchphrase-icon" role="img" aria-label="Scales of justice">‚öñÔ∏è</span>
                            <span class="hero-catchphrase-line-one">Checks and Balances</span>
                            <span class="hero-catchphrase-line-two">In Your Pocket</span>
                        </div>
                        <p class="hero-lead">
                            Stay informed about the decisions that shape your community. Track representatives, understand legislation, and participate in democracy‚Äîall from your phone.
                        </p>
                        <p class="hero-subtext">
                            Transparency and accountability, made accessible.
                        </p>
                        <div class="hero-cta">
                            <button class="btn-primary" onclick="navigateToSection('civic')">
                                <span>Track Your Representatives</span>
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            <button class="btn-secondary" onclick="navigateToSection('jobs')">
                                <span>Explore Democratic Workplaces</span>
                                <i class="fas fa-briefcase"></i>
                            </button>
                        </div>
                    </div>
                    <div class="hero-image">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 500" class="hero-illustration">
                            <defs>
                                <linearGradient id="heroGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                                </linearGradient>
                                <linearGradient id="heroGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
                                </linearGradient>
                                <linearGradient id="heroGrad3" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#43e97b;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#38f9d7;stop-opacity:1" />
                                </linearGradient>
                                <linearGradient id="heroGradOrange" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            
                            <!-- Background soft circles -->
                            <circle cx="300" cy="250" r="220" fill="url(#heroGrad1)" opacity="0.05"/>
                            <circle cx="300" cy="250" r="180" fill="url(#heroGrad2)" opacity="0.05"/>
                            <circle cx="300" cy="250" r="140" fill="url(#heroGrad3)" opacity="0.05"/>
                            
                            <!-- Central collaboration circle with people -->
                            <g transform="translate(300, 250)">
                                <!-- Main circle outline -->
                                <circle cx="0" cy="0" r="110" fill="none" stroke="url(#heroGrad1)" stroke-width="3" opacity="0.3"/>
                                <circle cx="0" cy="0" r="115" fill="none" stroke="url(#heroGrad2)" stroke-width="2" opacity="0.2" stroke-dasharray="10 5">
                                    <animateTransform attributeName="transform" type="rotate" 
                                        from="0 0 0" to="360 0 0" dur="40s" repeatCount="indefinite"/>
                                </circle>
                                
                                <!-- 5 People around circle (evenly spaced) -->
                                <!-- Person 1 - Top -->
                                <g transform="translate(0, -110)">
                                    <circle cx="0" cy="0" r="24" fill="url(#heroGrad1)"/>
                                    <rect x="-14" y="24" width="28" height="42" rx="14" fill="url(#heroGrad1)"/>
                                </g>
                                
                                <!-- Person 2 - Top Right -->
                                <g transform="translate(105, -34)">
                                    <circle cx="0" cy="0" r="24" fill="url(#heroGrad2)"/>
                                    <rect x="-14" y="24" width="28" height="42" rx="14" fill="url(#heroGrad2)"/>
                                </g>
                                
                                <!-- Person 3 - Bottom Right -->
                                <g transform="translate(65, 89)">
                                    <circle cx="0" cy="0" r="24" fill="url(#heroGrad3)"/>
                                    <rect x="-14" y="24" width="28" height="42" rx="14" fill="url(#heroGrad3)"/>
                                </g>
                                
                                <!-- Person 4 - Bottom Left -->
                                <g transform="translate(-65, 89)">
                                    <circle cx="0" cy="0" r="24" fill="url(#heroGradOrange)"/>
                                    <rect x="-14" y="24" width="28" height="42" rx="14" fill="url(#heroGradOrange)"/>
                                </g>
                                
                                <!-- Person 5 - Top Left -->
                                <g transform="translate(-105, -34)">
                                    <circle cx="0" cy="0" r="24" fill="url(#heroGrad3)"/>
                                    <rect x="-14" y="24" width="28" height="42" rx="14" fill="url(#heroGrad3)"/>
                                </g>
                                
                                <!-- Connection lines between people -->
                                <line x1="0" y1="-86" x2="81" y2="-10" stroke="url(#heroGrad2)" stroke-width="2.5" opacity="0.3" stroke-dasharray="8 4">
                                    <animate attributeName="stroke-dashoffset" from="0" to="12" dur="2s" repeatCount="indefinite"/>
                                </line>
                                <line x1="81" y1="-10" x2="51" y2="65" stroke="url(#heroGrad3)" stroke-width="2.5" opacity="0.3" stroke-dasharray="8 4">
                                    <animate attributeName="stroke-dashoffset" from="0" to="12" dur="2.2s" repeatCount="indefinite"/>
                                </line>
                                <line x1="51" y1="65" x2="-51" y2="65" stroke="url(#heroGradOrange)" stroke-width="2.5" opacity="0.3" stroke-dasharray="8 4">
                                    <animate attributeName="stroke-dashoffset" from="0" to="12" dur="2.4s" repeatCount="indefinite"/>
                                </line>
                                <line x1="-51" y1="65" x2="-81" y2="-10" stroke="url(#heroGrad1)" stroke-width="2.5" opacity="0.3" stroke-dasharray="8 4">
                                    <animate attributeName="stroke-dashoffset" from="0" to="12" dur="2.6s" repeatCount="indefinite"/>
                                </line>
                                <line x1="-81" y1="-10" x2="0" y2="-86" stroke="url(#heroGrad2)" stroke-width="2.5" opacity="0.3" stroke-dasharray="8 4">
                                    <animate attributeName="stroke-dashoffset" from="0" to="12" dur="2.8s" repeatCount="indefinite"/>
                                </line>
                                
                                <!-- Central collaborative icon (hands joining / unity symbol) -->
                                <g opacity="0.7">
                                    <circle cx="0" cy="0" r="35" fill="none" stroke="url(#heroGrad1)" stroke-width="2.5" opacity="0.4"/>
                                    <circle cx="0" cy="0" r="28" fill="none" stroke="url(#heroGrad2)" stroke-width="2" opacity="0.3">
                                        <animateTransform attributeName="transform" type="rotate" 
                                            from="0 0 0" to="-360 0 0" dur="30s" repeatCount="indefinite"/>
                                    </circle>
                                    <!-- Democracy/Collaboration icon -->
                                    <text x="0" y="15" font-size="40" text-anchor="middle" fill="url(#heroGrad1)" opacity="0.8">‚öñÔ∏è</text>
                                </g>
                            </g>
                            
                            <!-- Floating elements (kept from original) -->
                            <circle cx="80" cy="100" r="9" fill="url(#heroGrad1)" opacity="0.6">
                                <animate attributeName="cy" values="100;85;100" dur="3s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.6;0.8;0.6" dur="3s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="520" cy="140" r="11" fill="url(#heroGrad2)" opacity="0.6">
                                <animate attributeName="cy" values="140;125;140" dur="3.5s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="3.5s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="90" cy="380" r="8" fill="url(#heroGrad3)" opacity="0.6">
                                <animate attributeName="cy" values="380;365;380" dur="4s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.6;0.85;0.6" dur="4s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="510" cy="370" r="10" fill="url(#heroGradOrange)" opacity="0.6">
                                <animate attributeName="cy" values="370;355;370" dur="3.2s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="3.2s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="150" cy="200" r="7" fill="url(#heroGrad2)" opacity="0.5">
                                <animate attributeName="cx" values="150;160;150" dur="4.5s" repeatCount="indefinite"/>
                                <animate attributeName="cy" values="200;190;200" dur="4.5s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="450" cy="320" r="7" fill="url(#heroGrad3)" opacity="0.5">
                                <animate attributeName="cx" values="450;440;450" dur="5s" repeatCount="indefinite"/>
                                <animate attributeName="cy" values="320;310;320" dur="5s" repeatCount="indefinite"/>
                            </circle>
                        </svg>
                    </div>
                </div>
            </div>
        </section>

        <!-- Beta Notice (V36.9.4) -->
        <div style="max-width: 900px; margin: 2rem auto; padding: 1.25rem; background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%); border-radius: 12px; border-left: 5px solid #3b82f6; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="font-size: 2rem; flex-shrink: 0;">üíô</span>
                <div style="flex: 1;">
                    <h3 style="color: #1e40af; font-size: 1.1rem; font-weight: 600; margin: 0 0 0.5rem 0;">
                        Welcome! We're Growing & Improving Every Day
                    </h3>
                    <p style="color: #1e3a8a; margin: 0; line-height: 1.5; font-size: 0.95rem;">
                        Most features are fully operational! A few sections (like Community Services) are still being connected and will be available soon. Thank you for your patience as we build something special. ‚ú®
                    </p>
                </div>
            </div>
        </div>

        <!-- V37.9.1: Civic Engagement & Transparency Module - CONSOLIDATED & STREAMLINED -->
        <section id="civic" class="civic-section section">
            <div class="container">
                
                <!-- HERO ILLUSTRATION (Circular - Mutual Accountability) -->
                <div class="civic-hero">
                    <img src="images/civic-hero-circular-v10.svg?v=20250122-233000-SHARP" alt="Circle of mutual accountability: Citizens, Representatives, and Supreme Court seamlessly integrated and accountable to each other" class="civic-hero-image" onerror="this.onerror=null; this.src='images/civic-hero-circular-v9.svg';" />
                </div>
                
                <!-- TITLE & TAGLINE -->
                <div class="civic-header-text">
                    <h2 class="civic-title" data-translate="civic_title">Civic Engagement & Transparency</h2>
                    <p class="civic-subtitle" data-translate="civic_subtitle">
                        Your personal democracy toolkit - vote on bills, track representatives, explore court decisions, and see who truly represents your values
                    </p>
                </div>
                
                <!-- TAB NAVIGATION - Horizontal on Desktop, Vertical on Mobile -->
                <div class="civic-tabs" role="tablist" aria-label="Civic engagement features">
                    <button class="civic-tab active" 
                            data-tab="representatives" 
                            onclick="switchCivicTab('representatives')" 
                            role="tab"
                            aria-selected="true"
                            aria-controls="representatives-panel"
                            id="representatives-tab">
                        <span class="tab-icon">üë•</span>
                        <span class="tab-label">My Reps</span>
                    </button>
                    
                    <button class="civic-tab" 
                            data-tab="bills" 
                            onclick="switchCivicTab('bills')" 
                            role="tab" 
                            aria-selected="false"
                            aria-controls="bills-panel"
                            id="bills-tab">
                        <span class="tab-icon">üìú</span>
                        <span class="tab-label">Vote on Bills</span>
                    </button>
                    
                    <button class="civic-tab" 
                            data-tab="court" 
                            onclick="switchCivicTab('court')" 
                            role="tab"
                            aria-selected="false"
                            aria-controls="court-panel"
                            id="court-tab">
                        <span class="tab-icon">‚öñÔ∏è</span>
                        <span class="tab-label">Supreme Court</span>
                    </button>
                    
                    <button class="civic-tab" 
                            data-tab="dashboard" 
                            onclick="switchCivicTab('dashboard')" 
                            role="tab"
                            aria-selected="false"
                            aria-controls="dashboard-panel"
                            id="dashboard-tab">
                        <span class="tab-icon">üìä</span>
                        <span class="tab-label">My Dashboard</span>
                    </button>
                    
                    <button class="civic-tab" 
                            data-tab="voting" 
                            onclick="switchCivicTab('voting')" 
                            role="tab"
                            aria-selected="false"
                            aria-controls="voting-panel"
                            id="voting-tab">
                        <span class="tab-icon">üó≥Ô∏è</span>
                        <span class="tab-label">How to Vote</span>
                    </button>
                </div>
                
                <!-- TAB PANELS (Content Areas) -->
                <div class="civic-tab-panels">
                    
                    <!-- PANEL 2: Vote on Bills (V32.9.5 - Complete Rebuild) -->
                    <div class="civic-panel" 
                         id="bills-panel" 
                         role="tabpanel" 
                         aria-labelledby="bills-tab">
                        
                        <!-- Bills AI Chat Widget - TOP POSITION (Always visible) -->
                        <div class="bills-chat-top">
                            <button class="bills-chat-toggle-top" id="billsChatToggleTop" aria-label="Toggle bills chat">
                                <span class="icon">üí¨</span>
                                <span>Ask AI About Legislation</span>
                                <span class="arrow">‚ñº</span>
                            </button>
                            
                            <div class="bills-chat-window-top" id="billsChatWindowTop">
                                <div class="bills-chat-header-top">
                                    <h4>Bills Research Assistant</h4>
                                    <button class="bills-chat-close-top" id="billsChatCloseTop" aria-label="Close chat">
                                        ‚úï
                                    </button>
                                </div>
                                
                                <div class="bills-chat-messages-top" id="billsChatMessagesTop">
                                    <div class="bills-chat-empty-state-top">
                                        <!-- Purple gradient legislation icon SVG -->
                                        <svg class="chat-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                                            <defs>
                                                <linearGradient id="billsChatGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                                    <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                                    <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                                                </linearGradient>
                                            </defs>
                                            <!-- Document/bill icon -->
                                            <rect x="30" y="20" width="40" height="60" rx="3" fill="url(#billsChatGrad)" stroke="white" stroke-width="2"/>
                                            <line x1="38" y1="32" x2="62" y2="32" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                            <line x1="38" y1="42" x2="62" y2="42" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                            <line x1="38" y1="52" x2="58" y2="52" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                            <line x1="38" y1="62" x2="55" y2="62" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                        </svg>
                                        <p>Welcome! I'm your AI-powered bills research assistant.</p>
                                        <p>Ask me about any legislation, bill impacts, voting records, or help finding bills on specific topics. I can explain complex legislation in plain language.</p>
                                    </div>
                                </div>
                                
                                <div class="bills-chat-input-container-top">
                                    <textarea 
                                        id="billsChatInputTop" 
                                        class="bills-chat-input-top"
                                        placeholder="Ask about bills (e.g., What's the healthcare bill about?)"
                                        aria-label="Chat input"
                                        rows="1"
                                    ></textarea>
                                    <button class="bills-chat-send-top" id="billsChatSendTop" aria-label="Send message">
                                        ‚úàÔ∏è
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Progress Indicator (Shows after personalization) -->
                        <div id="billsProgressIndicator" class="bills-progress-indicator" style="display: none;">
                            <div class="progress-stats">
                                <div class="stat-item">
                                    <span class="stat-number" id="billsPendingCount">0</span>
                                    <span class="stat-label">Bills Pending Your Vote</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number" id="billsVotedCount">0</span>
                                    <span class="stat-label">Bills You've Voted On</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number" id="billsAlignmentScore">--%</span>
                                    <span class="stat-label">Rep Alignment</span>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="billsProgressFill" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <!-- Getting Started Prompt (Shown when NOT personalized) -->
                        <div id="billsGettingStarted" class="bills-getting-started">
                            <div class="getting-started-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="80" height="80">
                                    <defs>
                                        <linearGradient id="gettingStartedGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <circle cx="50" cy="50" r="40" fill="url(#gettingStartedGrad)"/>
                                    <path d="M 50 30 L 50 55 M 50 65 L 50 70" stroke="white" stroke-width="5" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <h3>Get Started with Personalized Bills</h3>
                            <p>Enable personalization to automatically see bills from your federal, state, and local government. We'll show you legislation that affects your community.</p>
                            
                            <div class="getting-started-features">
                                <div class="feature-item">
                                    <span class="feature-icon">üèõÔ∏è</span>
                                    <span>Federal legislation</span>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">üè¢</span>
                                    <span>State bills</span>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">üèòÔ∏è</span>
                                    <span>Local ordinances</span>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">üéØ</span>
                                    <span>Filtered by your location</span>
                                </div>
                            </div>
                            
                            <button class="getting-started-button" onclick="switchCivicTab('dashboard'); setTimeout(() => document.getElementById('v37PersonalizationZipcode').focus(), 500);">
                                <i class="fas fa-magic"></i>
                                <span>Enable Personalization</span>
                            </button>
                            
                            <p class="getting-started-note">
                                <i class="fas fa-lock"></i>
                                Your location stays private. Data stored only on your device.
                            </p>
                        </div>
                        
                        <!-- Category Filter Tabs (Shown after personalization) -->
                        <div id="billsCategoryTabs" class="bills-category-tabs" style="display: none;">
                            <button class="category-tab active" data-category="all" onclick="filterBillsByCategory('all')">
                                <span class="tab-icon">üìã</span>
                                <span class="tab-label">All Bills</span>
                            </button>
                            <button class="category-tab" data-category="education" onclick="filterBillsByCategory('education')">
                                <span class="tab-icon">üìö</span>
                                <span class="tab-label">Education</span>
                            </button>
                            <button class="category-tab" data-category="healthcare" onclick="filterBillsByCategory('healthcare')">
                                <span class="tab-icon">üè•</span>
                                <span class="tab-label">Healthcare</span>
                            </button>
                            <button class="category-tab" data-category="environment" onclick="filterBillsByCategory('environment')">
                                <span class="tab-icon">üåç</span>
                                <span class="tab-label">Environment</span>
                            </button>
                            <button class="category-tab" data-category="economy" onclick="filterBillsByCategory('economy')">
                                <span class="tab-icon">üí∞</span>
                                <span class="tab-label">Economy</span>
                            </button>
                            <button class="category-tab" data-category="rights" onclick="filterBillsByCategory('rights')">
                                <span class="tab-icon">‚öñÔ∏è</span>
                                <span class="tab-label">Rights</span>
                            </button>
                            <button class="category-tab" data-category="labor" onclick="filterBillsByCategory('labor')">
                                <span class="tab-icon">üíº</span>
                                <span class="tab-label">Labor</span>
                            </button>
                            <button class="category-tab" data-category="housing" onclick="filterBillsByCategory('housing')">
                                <span class="tab-icon">üè†</span>
                                <span class="tab-label">Housing</span>
                            </button>
                        </div>
                        
                        <!-- Government Level Filter (Shown after personalization) -->
                        <div id="billsLevelFilter" class="bills-level-filter" style="display: none;">
                            <button class="level-filter-btn active" data-level="all" onclick="filterBillsByLevel('all')">
                                <span>All Levels</span>
                            </button>
                            <button class="level-filter-btn" data-level="federal" onclick="filterBillsByLevel('federal')">
                                <span class="level-icon">üèõÔ∏è</span>
                                <span>Federal</span>
                            </button>
                            <button class="level-filter-btn" data-level="state" onclick="filterBillsByLevel('state')">
                                <span class="level-icon">üè¢</span>
                                <span>State</span>
                            </button>
                            <button class="level-filter-btn" data-level="local" onclick="filterBillsByLevel('local')">
                                <span class="level-icon">üèòÔ∏è</span>
                                <span>Local</span>
                            </button>
                        </div>
                        
                        <!-- Bills List Container (Populated by JavaScript) -->
                        <div id="billsListContainer" class="bills-list-container"></div>
                        
                    </div>
                    
                    <!-- PANEL 1: My Representatives (V37.16.0 - Active by default) -->
                    <div class="civic-panel active" 
                         id="representatives-panel" 
                         role="tabpanel" 
                         aria-labelledby="representatives-tab">
                        
                        <div class="panel-intro">
                            <h3>üë• Track Your Representatives</h3>
                            <p>Find your federal, state, and local representatives. Compare their voting records with your positions and stay informed about their actions.</p>
                            
                            <!-- V37.9.1: Cleaned up - removed old upgrade notice -->
                        </div>
                        
                        <!-- V36.10.0: Representative Finder renders here -->
                        <!-- Dynamic content rendered by civic-representative-finder.js -->
                        <div id="civicResults" class="representatives-container"></div>
                        
                        <!-- V36.11.1: Representative Finder loaded from external JS file -->
                        <!-- REMOVED INLINE SCRIPT - Now using civic-representative-finder-v2.js with enhanced UI -->
                        
                        <!-- Representatives AI Chat Widget (Contextual) -->
                        <div class="inline-chat-section" style="margin-top: 2rem;">
                            <button class="inline-chat-toggle" id="repsInlineChatToggle" onclick="toggleInlineChat('reps')">
                                <span style="font-size: 1.5rem;">üí¨</span>
                                <span style="font-size: 1.125rem; font-weight: 600;">Ask About Representatives</span>
                                <span style="font-size: 0.875rem; opacity: 0.8;">Get contextual insights about your representatives</span>
                                <span class="accordion-arrow" style="margin-left: auto;">‚ñº</span>
                            </button>
                            
                            <div class="inline-chat-window" id="repsInlineChatWindow">
                                <div class="inline-chat-messages" id="repsInlineChatMessages">
                                    <div class="inline-chat-message inline-chat-message-assistant">
                                        <div style="display: flex; gap: 0.75rem; align-items: flex-start;">
                                            <div style="font-size: 1.5rem; flex-shrink: 0;">ü§ñ</div>
                                            <div style="flex: 1;">
                                                <p style="margin-bottom: 0.5rem;">Hi! I can help you understand your representatives. Try asking:</p>
                                                <ul style="margin: 0; padding-left: 1.25rem; line-height: 1.6;">
                                                    <li>"What is [Representative]'s voting record?"</li>
                                                    <li>"How does [Rep] vote on healthcare?"</li>
                                                    <li>"Who represents my district?"</li>
                                                    <li>"Compare [Rep A] and [Rep B]"</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="inline-chat-input-area">
                                    <textarea 
                                        id="repsInlineChatInput" 
                                        class="inline-chat-input" 
                                        placeholder="Ask about your representatives (e.g., How did they vote on healthcare?)"
                                        rows="2"></textarea>
                                    <button class="inline-chat-send" id="repsInlineChatSend">
                                        <span>Send</span>
                                        <span>‚û§</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PANEL 4: Supreme Court -->
                    <div class="civic-panel" 
                         id="court-panel" 
                         role="tabpanel" 
                         aria-labelledby="court-tab">
                        
                        <div class="panel-intro">
                            <h3>‚öñÔ∏è Supreme Court Decisions</h3>
                            <p>Explore landmark cases, recent decisions, and understand how the court shapes policy.</p>
                        </div>
                        
                        <!-- Court Selection -->
                        <div class="civic-controls-compact">
                            <select id="courtCountrySelect" class="civic-select">
                                <option value="">Choose country...</option>
                                <option value="us">üá∫üá∏ United States</option>
                                <option value="mx">üá≤üáΩ M√©xico</option>
                                <option value="au">üá¶üá∫ Australia</option>
                                <option value="gb">üá¨üáß United Kingdom</option>
                                <option value="fr">üá´üá∑ France</option>
                                <option value="de">üá©üá™ Germany</option>
                                <option value="ca">üá®üá¶ Canada</option>
                            </select>
                            
                            <select id="courtLevelSelect" class="civic-select">
                                <option value="federal">üèõÔ∏è Federal Supreme Court</option>
                                <option value="state">üè¢ State Courts</option>
                            </select>
                        </div>
                        
                        <!-- Court Decisions (will be populated by existing Supreme Court functionality) -->
                        <div id="courtContainer" class="court-container"></div>
                        
                        <!-- Supreme Court AI Chat Widget (Contextual) -->
                        <div class="inline-chat-section" style="margin-top: 2rem;">
                            <button class="inline-chat-toggle" id="courtInlineChatToggle" onclick="toggleInlineChat('court')">
                                <span style="font-size: 1.5rem;">üí¨</span>
                                <span style="font-size: 1.125rem; font-weight: 600;">Ask About Court Decisions</span>
                                <span style="font-size: 0.875rem; opacity: 0.8;">Get insights about cases and rulings</span>
                                <span class="accordion-arrow" style="margin-left: auto;">‚ñº</span>
                            </button>
                            
                            <div class="inline-chat-window" id="courtInlineChatWindow">
                                <div class="inline-chat-messages" id="courtInlineChatMessages">
                                    <div class="inline-chat-message inline-chat-message-assistant">
                                        <div style="display: flex; gap: 0.75rem; align-items: flex-start;">
                                            <div style="font-size: 1.5rem; flex-shrink: 0;">ü§ñ</div>
                                            <div style="flex: 1;">
                                                <p style="margin-bottom: 0.5rem;">Hi! I can help you understand Supreme Court decisions. Try asking:</p>
                                                <ul style="margin: 0; padding-left: 1.25rem; line-height: 1.6;">
                                                    <li>"Explain [Case Name] in simple terms"</li>
                                                    <li>"What was the impact of [Case]?"</li>
                                                    <li>"Recent decisions on [Topic]"</li>
                                                    <li>"How does [Case] affect me?"</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="inline-chat-input-area">
                                    <textarea 
                                        id="courtInlineChatInput" 
                                        class="inline-chat-input" 
                                        placeholder="Ask about court decisions (e.g., What was Roe v Wade about?)"
                                        rows="2"></textarea>
                                    <button class="inline-chat-send" id="courtInlineChatSend">
                                        <span>Send</span>
                                        <span>‚û§</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- OLD CANDIDATES PANEL REMOVED - See civic-platform.html for advanced civic features -->
                    
                    <!-- PANEL 5: My Dashboard -->
                    <div class="civic-panel" 
                         id="dashboard-panel" 
                         role="tabpanel" 
                         aria-labelledby="dashboard-tab">
                        
                        <div class="panel-intro">
                            <h3>üìä Your Civic Engagement Dashboard</h3>
                            <p>Track your voting activity, see how you align with representatives, and discover your civic engagement patterns.</p>
                        </div>
                        
                        <!-- V37.9.1: Personalization Settings -->
                        <div class="personalization-settings" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; color: white;">
                            <h4 style="margin: 0 0 0.75rem 0; display: flex; align-items: center; gap: 0.5rem;">
                                <span>üîß</span>
                                <span>Personalization Settings</span>
                            </h4>
                            <p style="margin: 0 0 1rem 0; font-size: 0.9rem; opacity: 0.95;">
                                Enter your zipcode once to personalize all civic features across the site.
                            </p>
                            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap; align-items: center;">
                                <input 
                                    type="text" 
                                    id="v37PersonalizationZipcode" 
                                    placeholder="Enter zipcode (e.g., 90210, SW1A 1AA)"
                                    aria-label="Your zipcode for personalized civic features"
                                    style="flex: 1; min-width: 200px; padding: 0.875rem; border: 2px solid white; border-radius: 8px; font-size: 1rem; background: white; color: #1e293b;"
                                >
                                <button 
                                    onclick="saveV37Personalization()" 
                                    style="padding: 0.875rem 1.75rem; background: white; color: #667eea; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 1rem; box-shadow: 0 2px 8px rgba(0,0,0,0.15); transition: all 0.2s;"
                                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.25)';"
                                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.15)';">
                                    Save Zipcode
                                </button>
                            </div>
                            <div id="v37PersonalizationStatus" style="margin-top: 0.75rem; font-size: 0.85rem; opacity: 0.9; display: none;">
                                <!-- Status messages appear here -->
                            </div>
                            <small style="display: block; margin-top: 0.75rem; opacity: 0.85; font-size: 0.85rem;">
                                üîí Stored securely on your device. Never shared. Optional feature.
                            </small>
                        </div>
                        
                        <!-- Dashboard V34.3.0 - Modern Design with AI Insights -->
                        <div id="personalDashboardContainer" class="dashboard-container">
                            <div class="civic-dashboard-container">
                                
                                <!-- Header -->
                                <div class="dashboard-header-modern">
                                    <h2>üèõÔ∏è Civic Engagement Dashboard</h2>
                                    <div id="dashboardHeaderLocation"></div>
                                </div>
                                
                                <!-- Stat Cards -->
                                <div class="dashboard-stats-modern">
                                    <div class="stat-card-modern stat-primary">
                                        <div class="stat-icon-modern">üìä</div>
                                        <div class="stat-number-modern" id="statTotal">0</div>
                                        <div class="stat-label-modern">Total Bills</div>
                                    </div>
                                    
                                    <div class="stat-card-modern stat-success">
                                        <div class="stat-icon-modern">‚úÖ</div>
                                        <div class="stat-number-modern" id="statSupported">0</div>
                                        <div class="stat-label-modern">Supported</div>
                                    </div>
                                    
                                    <div class="stat-card-modern stat-danger">
                                        <div class="stat-icon-modern">‚ùå</div>
                                        <div class="stat-number-modern" id="statOpposed">0</div>
                                        <div class="stat-label-modern">Opposed</div>
                                    </div>
                                    
                                    <div class="stat-card-modern stat-neutral">
                                        <div class="stat-icon-modern">‚ö™</div>
                                        <div class="stat-number-modern" id="statAbstained">0</div>
                                        <div class="stat-label-modern">Abstained</div>
                                    </div>
                                </div>
                                
                                <!-- Quick Actions -->
                                <div class="dashboard-actions">
                                    <button class="action-btn" id="exportDashboardJSON">
                                        <span>üì§</span>
                                        <span>Export JSON</span>
                                    </button>
                                    <button class="action-btn" id="exportDashboardCSV">
                                        <span>üìã</span>
                                        <span>Export CSV</span>
                                    </button>
                                    <button class="action-btn" id="resetDashboard">
                                        <span>üîÑ</span>
                                        <span>Reset Filters</span>
                                    </button>
                                </div>
                                
                                <!-- Filters -->
                                <div class="dashboard-section">
                                    <div class="dashboard-filters">
                                        <select class="filter-select" id="filterDateRange">
                                            <option value="all">All Time</option>
                                            <option value="week">Past Week</option>
                                            <option value="month">Past Month</option>
                                            <option value="quarter">Past 3 Months</option>
                                            <option value="year">Past Year</option>
                                        </select>
                                        
                                        <select class="filter-select" id="filterBillType">
                                            <option value="all">All Categories</option>
                                            <option value="Healthcare">Healthcare</option>
                                            <option value="Education">Education</option>
                                            <option value="Environment">Environment</option>
                                            <option value="Economy">Economy</option>
                                            <option value="Justice">Justice</option>
                                            <option value="Infrastructure">Infrastructure</option>
                                        </select>
                                        
                                        <select class="filter-select" id="filterVoteType">
                                            <option value="all">All Votes</option>
                                            <option value="yes">Supported</option>
                                            <option value="no">Opposed</option>
                                            <option value="abstain">Abstained</option>
                                        </select>
                                        
                                        <select class="filter-select" id="filterGovLevel">
                                            <option value="all">All Levels</option>
                                            <option value="federal">Federal</option>
                                            <option value="state">State</option>
                                            <option value="local">Local</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Visualizations Accordion -->
                                <div class="dashboard-accordion">
                                    <div class="accordion-header" data-section="visualizations">
                                        <div>
                                            <span style="font-size: 1.25rem; font-weight: 600;">üìä Visualizations</span>
                                            <span style="font-size: 0.875rem; color: #9ca3af; margin-left: 0.5rem;">6 interactive charts</span>
                                        </div>
                                        <span class="accordion-arrow">‚ñº</span>
                                    </div>
                                    <div class="accordion-content" data-section="visualizations">
                                        <div class="chart-grid">
                                            <div class="chart-container">
                                                <div class="chart-wrapper">
                                                    <canvas id="chartPie"></canvas>
                                                </div>
                                            </div>
                                            <div class="chart-container">
                                                <div class="chart-wrapper" style="height: 350px;">
                                                    <canvas id="chartBar"></canvas>
                                                </div>
                                            </div>
                                            <div class="chart-container">
                                                <div class="chart-wrapper" style="height: 350px;">
                                                    <canvas id="chartLine"></canvas>
                                                </div>
                                            </div>
                                            <div class="chart-container">
                                                <div class="chart-wrapper">
                                                    <canvas id="chartDonut"></canvas>
                                                </div>
                                            </div>
                                            <div class="chart-container">
                                                <div class="chart-wrapper" style="height: 350px;">
                                                    <canvas id="chartRadar"></canvas>
                                                </div>
                                            </div>
                                            <div class="chart-container">
                                                <div class="chart-wrapper chart-timeline" style="height: 400px;">
                                                    <canvas id="chartTimeline"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Representative Alignment Accordion -->
                                <div class="dashboard-accordion">
                                    <div class="accordion-header" data-section="alignment">
                                        <div>
                                            <span style="font-size: 1.25rem; font-weight: 600;">üë• Representative Alignment</span>
                                            <span style="font-size: 0.875rem; color: #9ca3af; margin-left: 0.5rem;">Compare with elected officials</span>
                                        </div>
                                        <span class="accordion-arrow">‚ñº</span>
                                    </div>
                                    <div class="accordion-content" data-section="alignment">
                                        <div class="alignment-grid" id="alignmentCardsContainer">
                                            <!-- Alignment cards will be rendered by JS -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Recent Activity Accordion -->
                                <div class="dashboard-accordion">
                                    <div class="accordion-header" data-section="activity">
                                        <div>
                                            <span style="font-size: 1.25rem; font-weight: 600;">üìú Recent Activity</span>
                                            <span style="font-size: 0.875rem; color: #9ca3af; margin-left: 0.5rem;">Your latest votes</span>
                                        </div>
                                        <span class="accordion-arrow">‚ñº</span>
                                    </div>
                                    <div class="accordion-content" data-section="activity">
                                        <div id="activityListContainer">
                                            <!-- Activity list will be rendered by JS -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Dashboard Chat Widget -->
                                <div class="dashboard-section" style="margin-top: 1.5rem;">
                                    <button class="dashboard-chat-toggle" id="dashboardChatToggle" onclick="toggleAccordion('chat')">
                                        <span style="font-size: 1.5rem;">üí¨</span>
                                        <span style="font-size: 1.125rem; font-weight: 600;">Dashboard AI Insights</span>
                                        <span style="font-size: 0.875rem; opacity: 0.8;">Ask about your voting patterns</span>
                                        <span class="accordion-arrow" style="margin-left: auto;">‚ñº</span>
                                    </button>
                                    
                                    <div class="dashboard-chat-window" id="dashboardChatWindow">
                                        <div class="dashboard-chat-messages" id="dashboardChatMessages">
                                            <div class="dashboard-chat-message dashboard-chat-message-assistant">
                                                <div style="display: flex; gap: 0.75rem; align-items: flex-start;">
                                                    <div style="font-size: 1.5rem; flex-shrink: 0;">ü§ñ</div>
                                                    <div style="flex: 1;">
                                                        <p style="margin-bottom: 0.5rem;">Hi! I can help you understand your civic engagement. Try asking:</p>
                                                        <ul style="margin: 0; padding-left: 1.25rem; line-height: 1.6;">
                                                            <li>"Explain my voting pattern"</li>
                                                            <li>"Compare me with [Representative]"</li>
                                                            <li>"What bills match my interests?"</li>
                                                            <li>"Give me a summary"</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="dashboard-chat-input-area">
                                            <textarea 
                                                id="dashboardChatInput" 
                                                class="dashboard-chat-input" 
                                                placeholder="Ask about your votes (e.g., Which bills did I support?)"
                                                rows="2"></textarea>
                                            <button class="dashboard-chat-send" id="dashboardChatSend">
                                                <span>Send</span>
                                                <span>‚û§</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                    
                </div>
                
                <!-- V36.4.1: Removed Main Civic Chat - redundant with inline chats (Representatives, Supreme Court, Dashboard) -->
                
                <!-- PANEL 6: How to Vote -->
                <div class="civic-panel" 
                     id="voting-panel" 
                     role="tabpanel" 
                     aria-labelledby="voting-tab"
                     style="display: none;">
                    
                    <div class="panel-intro">
                        <h3>üó≥Ô∏è How to Vote & Register</h3>
                        <p>Everything you need to know about voting in your country. Select your country below to get started.</p>
                    </div>
                    
                    <!-- Country Selector -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                        <label style="display: block; color: white; font-weight: 600; margin-bottom: 0.75rem; font-size: 1.125rem;">
                            üìç Select Your Country:
                        </label>
                        <select id="votingCountrySelector" 
                                style="width: 100%; padding: 0.875rem; border-radius: 8px; border: none; font-size: 1rem; font-weight: 500; cursor: pointer; background: white; color: #1a202c;"
                                onchange="loadVotingInfo(this.value)">
                            <option value="">Choose a country...</option>
                            <option value="USA">üá∫üá∏ United States</option>
                            <option value="MEXICO">üá≤üáΩ M√©xico</option>
                            <option value="AUSTRALIA">üá¶üá∫ Australia</option>
                            <option value="GERMANY">üá©üá™ Germany</option>
                            <option value="FRANCE">üá´üá∑ France</option>
                            <option value="CANADA">üá®üá¶ Canada</option>
                            <option value="UK">üá¨üáß United Kingdom</option>
                        </select>
                    </div>
                    
                    <!-- Voting Information Container -->
                    <div id="voting-info-container">
                        <div style="text-align: center; padding: 3rem 1rem; color: #718096;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">üó≥Ô∏è</div>
                            <p style="font-size: 1.125rem; font-weight: 500; margin-bottom: 0.5rem;">Select your country to view voting information</p>
                            <p style="font-size: 0.9375rem;">We provide comprehensive guides for USA, Mexico, Australia, Germany, France, Canada, and UK</p>
                        </div>
                    </div>
                    
                    <!-- Voting Assistant Chat Widget -->
                    <div style="margin-top: 2rem; background: #f7fafc; border-radius: 12px; padding: 1.5rem; border: 2px solid #e2e8f0;">
                        <button class="civic-chat-toggle" 
                                id="votingChatToggle" 
                                onclick="openVotingAssistant()"
                                style="width: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; padding: 1rem; font-size: 1.0625rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.75rem; transition: all 0.2s;">
                            <span style="font-size: 1.5rem;">ü§ñ</span>
                            <span>Ask the Voting Assistant</span>
                        </button>
                        <p style="text-align: center; margin-top: 0.75rem; font-size: 0.875rem; color: #718096;">
                            Get personalized help with voter registration, polling locations, and voting procedures
                        </p>
                    </div>
                    
                </div>
                
                <!-- Community Services & Ethical Business Widget -->
                <div id="communityServicesWidget"></div>
                
            </div>
        </section>


        <!-- Jobs Section - Tabbed Interface V2 (Matches Civic Design) -->
        <!-- ALL-IN-ONE JOBS SECTION: Inline CSS & JS (V35.2.0-INLINE-FIX) -->
        <style>
/**
 * JOBS SECTION - INLINE CSS V35.2.0
 * All styles embedded to bypass external file loading issues
 */

/* Container */
.jobs-section-modern {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.03) 0%, rgba(118, 75, 162, 0.02) 50%, rgba(72, 187, 120, 0.03) 100%);
    padding: 2rem 0;
}

.jobs-modern-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
}

/* Hero Header */
.jobs-hero-modern {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    padding: 2rem 1.5rem;
    border-radius: 12px;
    color: white;
    text-align: center;
    margin-bottom: 2rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.jobs-hero-modern .jobs-hero-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: 1rem;
    animation: gentleBounce 2s ease-in-out infinite;
}

@keyframes gentleBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
}

.jobs-hero-modern h2 {
    color: white !important;
    background: none !important;
    -webkit-background-clip: initial !important;
    -webkit-text-fill-color: white !important;
    background-clip: initial !important;
    font-size: 2rem;
    font-weight: 700;
    margin: 0 0 1rem 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.jobs-hero-modern .subtitle {
    font-size: 1.125rem;
    line-height: 1.6;
    opacity: 0.95;
    max-width: 700px;
    margin: 0 auto;
    color: white;
}

/* CRITICAL FIX: Accordion container must have overflow: visible */
.jobs-accordion {
    background: white;
    border-radius: 12px;
    overflow: visible;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    margin-bottom: 2rem;
}

/* Accordion Header */
.jobs-accordion-header {
    padding: 1.25rem 1.5rem;
    background: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.3s ease;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    border-radius: 12px 12px 0 0;
}

.jobs-accordion-header:hover {
    background: rgba(72, 187, 120, 0.05);
}

.jobs-accordion-header:not(.active) {
    border-radius: 12px;
}

.jobs-accordion-header.active {
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.1) 0%, rgba(56, 161, 105, 0.08) 100%);
    border-bottom-color: rgba(72, 187, 120, 0.3);
    border-radius: 12px 12px 0 0;
}

.jobs-accordion-header .icon {
    font-size: 1.75rem;
    flex-shrink: 0;
}

.jobs-accordion-header .text-content {
    flex: 1;
}

.jobs-accordion-header .title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary, #2d3748);
    margin-bottom: 0.25rem;
    display: block;
}

.jobs-accordion-header .subtitle {
    font-size: 0.9375rem;
    color: var(--text-secondary, #718096);
    display: block;
}

.jobs-accordion-header .arrow {
    font-size: 1rem;
    color: var(--text-secondary, #718096);
    transition: transform 0.3s ease;
    flex-shrink: 0;
}

.jobs-accordion-header.active .arrow {
    transform: rotate(180deg);
}

/* Accordion Content */
.jobs-accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, opacity 0.3s ease;
    opacity: 0;
    border-radius: 0 0 12px 12px;
}

.jobs-accordion-content.active {
    max-height: 5000px;
    opacity: 1;
}

.jobs-accordion-body {
    padding: 2rem 1.5rem;
    background: rgba(72, 187, 120, 0.02);
}

/* Inline Chat Toggle Button */
.jobs-inline-chat-toggle {
    width: 100%;
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.05) 0%, rgba(56, 161, 105, 0.05) 100%);
    border: none;
    padding: 1.25rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 12px;
    margin-bottom: 0;
}

.jobs-inline-chat-toggle:hover {
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.08) 0%, rgba(56, 161, 105, 0.08) 100%);
}

/* CRITICAL FIX: Active state for toggle button */
.jobs-inline-chat-toggle.active {
    border-radius: 12px 12px 0 0;
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.1) 0%, rgba(56, 161, 105, 0.08) 100%);
    border-bottom: 1px solid rgba(72, 187, 120, 0.2);
}

.jobs-inline-chat-toggle .icon {
    font-size: 1.5rem;
}

.jobs-inline-chat-toggle .text-content {
    flex: 1;
    text-align: left;
}

.jobs-inline-chat-toggle .title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary, #2d3748);
    display: block;
    margin-bottom: 0.25rem;
}

.jobs-inline-chat-toggle .subtitle {
    font-size: 0.9375rem;
    color: var(--text-secondary, #718096);
}

.jobs-inline-chat-toggle .arrow {
    font-size: 1rem;
    color: var(--text-secondary, #718096);
    transition: transform 0.3s ease;
}

/* Inline Chat Window */
.jobs-inline-chat-window {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, opacity 0.3s ease;
    opacity: 0;
    background: white;
    border-radius: 0 0 12px 12px;
    margin-bottom: 0;
}

.jobs-inline-chat-window.active {
    max-height: 600px;
    opacity: 1;
    border: 2px solid rgba(72, 187, 120, 0.2);
}

.jobs-inline-chat-messages {
    padding: 1.5rem;
    max-height: 400px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.jobs-inline-chat-message {
    padding: 1rem 1.25rem;
    border-radius: 12px;
    max-width: 85%;
    line-height: 1.6;
    animation: messageSlideIn 0.3s ease;
}

@keyframes messageSlideIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.jobs-inline-chat-message-user {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    color: white;
    margin-left: auto;
    align-self: flex-end;
}

.jobs-inline-chat-message-assistant {
    background: white;
    border: 2px solid rgba(72, 187, 120, 0.1);
    color: var(--text-secondary, #4a5568);
    margin-right: auto;
    align-self: flex-start;
}

.jobs-inline-chat-input-area {
    padding: 1rem 1.5rem;
    border-top: 1px solid rgba(72, 187, 120, 0.2);
    display: flex;
    gap: 0.75rem;
}

.jobs-inline-chat-input {
    flex: 1;
    padding: 0.75rem 1rem;
    border: 2px solid rgba(72, 187, 120, 0.2);
    border-radius: 8px;
    font-size: 1rem;
    font-family: inherit;
    resize: none;
    transition: border-color 0.3s ease;
}

.jobs-inline-chat-input:focus {
    outline: none;
    border-color: #48bb78;
}

.jobs-inline-chat-send {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.jobs-inline-chat-send:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(72, 187, 120, 0.3);
}

/* Industry Tabs - RESPONSIVE WRAPPING based on screen size */
.jobs-industry-tabs {
    display: flex;
    flex-wrap: wrap; /* WRAP tabs to multiple rows */
    justify-content: center; /* CENTER horizontally */
    gap: 0.5rem;
    padding: 0.5rem 1rem 1rem 1rem;
    margin-bottom: 1.5rem;
}

.jobs-industry-tab {
    background: white;
    border: 2px solid rgba(72, 187, 120, 0.2);
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap; /* Keep text on one line */
    font-weight: 600;
    color: var(--text-primary, #2d3748);
    text-align: center;
    /* Responsive width - adapts to screen size */
    flex: 0 0 auto; /* Don't grow or shrink */
}

/* Mobile Portrait (< 480px): 2 buttons per row (smaller width) */
@media (max-width: 479px) {
    .jobs-industry-tab {
        width: calc(50% - 0.5rem); /* 2 per row with gap */
        min-width: 140px; /* Smaller min for mobile */
    }
}

/* Mobile Landscape / Small Tablet (480-767px): 2 buttons per row */
@media (min-width: 480px) and (max-width: 767px) {
    .jobs-industry-tab {
        width: calc(50% - 0.75rem); /* 2 per row with gap */
        min-width: 160px;
    }
}

/* Tablet (768-1023px): 3 buttons per row */
@media (min-width: 768px) and (max-width: 1023px) {
    .jobs-industry-tab {
        width: calc(33.333% - 0.5rem); /* 3 per row with gap */
        min-width: 160px;
    }
}

/* Desktop (1024px+): 4 buttons per row */
@media (min-width: 1024px) {
    .jobs-industry-tab {
        width: calc(25% - 0.5rem); /* 4 per row with gap */
        min-width: 180px;
        max-width: 220px;
    }
}

/* Mobile Landscape Optimization: Ultra-compact header & buttons */
@media (max-width: 896px) and (orientation: landscape) {
    /* Ultra-compact header for landscape mobile */
    .site-header {
        padding: 0.25rem 0 !important;
    }
    
    .header-content {
        padding: 0.25rem 1rem !important;
    }
    
    .site-logo {
        max-height: 28px !important;
    }
    
    .site-title {
        font-size: 0.95rem !important;
        margin-bottom: 0.1rem !important;
    }
    
    .establishment {
        font-size: 0.6rem !important;
    }
    
    /* Smaller industry buttons in landscape */
    .jobs-industry-tab {
        width: calc(25% - 0.5rem); /* 4 per row in landscape */
        min-width: 120px;
        padding: 0.5rem 0.75rem !important;
        font-size: 0.85rem !important;
    }
}

.jobs-industry-tab:hover {
    background: rgba(72, 187, 120, 0.05);
    border-color: rgba(72, 187, 120, 0.4);
}

.jobs-industry-tab.active {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    border-color: #38a169;
    color: white;
}

/* Job Cards Grid */
.jobs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
    margin-top: 1.5rem;
    justify-items: center; /* Center cards on mobile */
}

/* Hide grid initially until industry selected */
.jobs-grid:empty {
    display: none;
}

.jobs-grid.hidden {
    display: none;
}

.job-card {
    background: white;
    border: 2px solid rgba(72, 187, 120, 0.2);
    border-radius: 8px;
    padding: 1.25rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    width: 100%; /* Ensure cards fill grid cell */
    max-width: 350px; /* Limit card width for better readability */
}

.job-card:hover {
    border-color: #48bb78;
    box-shadow: 0 4px 12px rgba(72, 187, 120, 0.2);
    transform: translateY(-2px);
}

.job-card .job-icon {
    font-size: 2rem;
}

.job-card .job-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary, #2d3748);
}

.job-card .job-preview {
    font-size: 0.9375rem;
    color: var(--text-secondary, #718096);
    line-height: 1.5;
}

.job-card .explore-btn {
    margin-top: auto;
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.1) 0%, rgba(56, 161, 105, 0.08) 100%);
    border: none;
    border-radius: 6px;
    color: #38a169;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.job-card .explore-btn:hover {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    color: white;
}

/* Job Comparison Modal */
.job-comparison-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10000;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    animation: fadeIn 0.3s ease;
}

.job-comparison-modal.active {
    display: flex;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.job-comparison-content {
    background: white;
    border-radius: 12px;
    max-width: 900px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}

.job-comparison-header {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    color: white;
    padding: 2rem 1.5rem;
    border-radius: 12px 12px 0 0;
    position: sticky;
    top: 0;
    z-index: 10;
}

.job-comparison-header h3 {
    font-size: 1.75rem;
    margin: 0 0 0.5rem 0;
    color: white !important;
    background: none !important;
    -webkit-text-fill-color: white !important;
}

.job-comparison-header .subtitle {
    font-size: 1rem;
    opacity: 0.9;
}

.job-comparison-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 11;
}

.job-comparison-close:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg);
}

/* Floating Close Button - Always visible, mobile-friendly */
.job-floating-close {
    position: fixed;
    bottom: 1.5rem;
    right: 1.5rem;
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    border: 3px solid white;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    color: white;
    font-size: 1.75rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 16px rgba(72, 187, 120, 0.4);
    z-index: 10001;
    transition: all 0.3s ease;
    animation: floatPulse 2s ease-in-out infinite;
}

.job-floating-close:hover {
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 6px 24px rgba(72, 187, 120, 0.6);
}

.job-floating-close:active {
    transform: scale(0.95);
}

@keyframes floatPulse {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

/* Mobile optimization for floating button */
@media (max-width: 768px) {
    .job-floating-close {
        bottom: 1rem;
        right: 1rem;
        width: 52px;
        height: 52px;
        font-size: 1.5rem;
    }
}

/* Job Modal AI Chat Assistant - Collapsible Accordion Style */
.job-modal-chat-accordion {
    margin: 2rem 0;
    border-radius: 12px;
    overflow: hidden;
    border: 2px solid #e2e8f0;
}

.job-modal-chat-header {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    padding: 1.25rem 1.5rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    flex-wrap: wrap;
    transition: all 0.3s ease;
    user-select: none;
}

.job-modal-chat-header:hover {
    background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
}

.job-modal-chat-header .context-badge {
    background: rgba(255, 255, 255, 0.25);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.job-modal-chat-arrow {
    font-size: 1.25rem;
    color: white;
    opacity: 0.9;
    transition: transform 0.3s ease;
}

.job-modal-chat-body {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    background: #f7fafc;
}

.job-modal-chat-body.active {
    max-height: 500px;
    overflow-y: auto;
}

.job-modal-chat-content {
    padding: 1.5rem;
}

.job-modal-chat-messages {
    max-height: 250px;
    overflow-y: auto;
    margin-bottom: 1rem;
    padding: 1rem;
    background: white;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
}

.job-modal-chat-message {
    margin-bottom: 1rem;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    line-height: 1.6;
}

.job-modal-chat-message-user {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    color: white;
    margin-left: 2rem;
}

.job-modal-chat-message-assistant {
    background: #f0f4f8;
    color: var(--text-primary, #2d3748);
    margin-right: 2rem;
}

.job-modal-chat-input-container {
    display: flex;
    gap: 0.75rem;
}

.job-modal-chat-input {
    flex: 1;
    padding: 0.75rem 1rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    font-size: 1rem;
    transition: all 0.3s ease;
}

.job-modal-chat-input:focus {
    outline: none;
    border-color: #48bb78;
    box-shadow: 0 0 0 3px rgba(72, 187, 120, 0.1);
}

.job-modal-chat-send {
    padding: 0.75rem 1.5rem;
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.job-modal-chat-send:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(72, 187, 120, 0.3);
}

.job-modal-chat-send:active {
    transform: translateY(0);
}

@media (max-width: 768px) {
    .job-modal-chat-content {
        padding: 1rem;
    }
    
    .job-modal-chat-header {
        padding: 1rem;
    }
    
    .job-modal-chat-messages {
        max-height: 200px;
    }
    
    .job-modal-chat-message-user {
        margin-left: 1rem;
    }
    
    .job-modal-chat-message-assistant {
        margin-right: 1rem;
    }
    
    .job-modal-chat-body.active {
        max-height: 400px;
    }
}

.job-comparison-body {
    padding: 2rem 1.5rem;
}

.comparison-section {
    margin-bottom: 2.5rem;
}

.comparison-section h4 {
    font-size: 1.25rem;
    color: var(--text-primary, #2d3748);
    margin-bottom: 1rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.comparison-section .icon {
    font-size: 1.5rem;
}

.comparison-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}

.comparison-card {
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.05) 0%, rgba(56, 161, 105, 0.03) 100%);
    border: 2px solid rgba(72, 187, 120, 0.2);
    border-radius: 8px;
    padding: 1.5rem;
}

.comparison-card h5 {
    font-size: 1.125rem;
    color: var(--text-primary, #2d3748);
    margin-bottom: 0.75rem;
    font-weight: 600;
}

.comparison-card p {
    font-size: 1rem;
    line-height: 1.7;
    color: var(--text-secondary, #4a5568);
    margin: 0;
}

.transformation-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.transformation-item {
    background: white;
    border-left: 4px solid #48bb78;
    padding: 1rem 1.25rem;
    border-radius: 6px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.transformation-item strong {
    color: #38a169;
    display: block;
    margin-bottom: 0.5rem;
}

.examples-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
}

.example-card {
    background: white;
    border: 2px solid rgba(72, 187, 120, 0.2);
    border-radius: 8px;
    padding: 1.25rem;
}

.example-card h6 {
    font-size: 1.125rem;
    color: var(--text-primary, #2d3748);
    margin-bottom: 0.5rem;
    font-weight: 600;
}

.example-card .location {
    font-size: 0.9375rem;
    color: var(--text-secondary, #718096);
    margin-bottom: 0.75rem;
}

.example-card p {
    font-size: 1rem;
    line-height: 1.6;
    color: var(--text-secondary, #4a5568);
    margin-bottom: 1rem;
}

.example-card a {
    color: #38a169;
    font-weight: 600;
    text-decoration: none;
    transition: color 0.3s ease;
}

.example-card a:hover {
    color: #48bb78;
    text-decoration: underline;
}

.comparison-loading {
    text-align: center;
    padding: 3rem 1rem;
}

.comparison-loading .spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(72, 187, 120, 0.2);
    border-top-color: #48bb78;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 1rem;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.comparison-loading p {
    font-size: 1.125rem;
    color: var(--text-secondary, #718096);
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .jobs-hero-modern h2 { font-size: 1.5rem; }
    .jobs-hero-modern .subtitle { font-size: 1rem; }
    .jobs-accordion-header { padding: 1rem; }
    .jobs-accordion-body { padding: 1.5rem 1rem; }
    .jobs-accordion-header .title { font-size: 1.125rem; }
    .comparison-grid { grid-template-columns: 1fr; }
    .jobs-inline-chat-input-area { flex-direction: column; }
    .jobs-inline-chat-send { width: 100%; }
    .job-comparison-content { max-height: 95vh; border-radius: 12px 12px 0 0; }
    .job-comparison-header { padding: 1.5rem 1rem; }
    .job-comparison-body { padding: 1.5rem 1rem; }
}

@media (max-width: 640px) {
    .jobs-grid {
        grid-template-columns: 1fr;
        justify-items: center;
        padding: 0 0.5rem;
    }
    
    .job-card {
        max-width: 100%; /* Full width on small mobile */
    }
}

/* Desktop: 2 columns for better layout */
@media (min-width: 641px) and (max-width: 1024px) {
    .jobs-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Large desktop: 3 columns */
@media (min-width: 1025px) {
    .jobs-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* Accessibility */
.jobs-accordion-header:focus,
.jobs-industry-tab:focus,
.job-card:focus,
.jobs-inline-chat-toggle:focus {
    outline: 2px solid #48bb78;
    outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

@media (prefers-contrast: high) {
    .jobs-accordion-header,
    .job-card,
    .comparison-card {
        border-width: 3px;
    }
}

/* V36.0.0: Old welcome modal CSS removed - Fresh rebuild below */

        </style>
        
        <section id="jobs" class="jobs-section-modern section">
            <div class="jobs-modern-container">
                
                <!-- Hero Header -->
                <div class="jobs-hero-modern">
                    <span class="jobs-hero-icon">üíº</span>
                    <h2>Your Work, Reimagined</h2>
                    <p class="subtitle">
                        Discover how 230+ professions transform in democratic workplaces. Compare traditional hierarchies with worker-owned cooperatives where you share power, profits, and decisions.
                    </p>
                </div>
                
                <!-- Accordion: Inline AI Chat Widget -->
                <div class="jobs-accordion">
                    <button 
                        class="jobs-inline-chat-toggle" 
                        id="jobsInlineChatToggle" 
                        onclick="toggleJobsInlineChat()"
                        aria-label="Toggle jobs chat"
                        aria-expanded="false">
                        <span class="icon">üí¨</span>
                        <div class="text-content">
                            <span class="title">Ask AI About Any Profession</span>
                            <span class="subtitle">Get instant answers about democratic workplaces</span>
                        </div>
                        <span class="arrow">‚ñº</span>
                    </button>
                    
                    <div class="jobs-inline-chat-window" id="jobsInlineChatWindow">
                        <div class="jobs-inline-chat-messages" id="jobsInlineChatMessages">
                            <div class="jobs-inline-chat-message jobs-inline-chat-message-assistant">
                                <strong>üëã Hi! I'm here to help you explore democratic workplaces.</strong><br><br>
                                You can ask me:<br>
                                ‚Ä¢ "How does [profession] work in cooperatives?"<br>
                                ‚Ä¢ "What is a worker cooperative?"<br>
                                ‚Ä¢ "Are there cooperatives near me?"<br>
                                ‚Ä¢ "How do I join or start one?"
                            </div>
                        </div>
                        
                        <div class="jobs-inline-chat-input-area">
                            <textarea 
                                id="jobsInlineChatInput" 
                                class="jobs-inline-chat-input" 
                                placeholder="Ask about professions (e.g., Compare teacher vs. teacher co-op)"
                                rows="2"
                                aria-label="Chat input"></textarea>
                            <button 
                                class="jobs-inline-chat-send" 
                                id="jobsInlineChatSend"
                                aria-label="Send message">
                                Send ‚û§
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Accordion: Explore by Industry -->
                <div class="jobs-accordion">
                    <div class="jobs-accordion-header" onclick="toggleJobsExplore()">
                        <span class="icon">üîç</span>
                        <div class="text-content">
                            <span class="title">Explore by Industry</span>
                            <span class="subtitle">Browse 230+ professions across 8 industries</span>
                        </div>
                        <span class="arrow">‚ñº</span>
                    </div>
                    
                    <div class="jobs-accordion-content" id="jobsExploreContent">
                        <div class="jobs-accordion-body">
                            <!-- Industry Tabs -->
                            <div class="jobs-industry-tabs" id="jobsIndustryTabs">
                                <!-- Dynamically loaded by jobs-modern.js -->
                            </div>
                            
                            <!-- Profession Cards Grid -->
                            <div class="jobs-grid" id="jobsProfessionsGrid">
                                <!-- Dynamically loaded by jobs-modern.js -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Nonprofit Employers Widget -->
                <div id="nonprofitEmployersWidget"></div>
                
            </div>
            
            <!-- Job Comparison Modal -->
            <div class="job-comparison-modal" id="jobComparisonModal" onclick="if(event.target === this) closeComparisonModal();">
                <div class="job-comparison-content" onclick="event.stopPropagation();">
                    <div class="job-comparison-header" id="jobComparisonHeader">
                        <h3>Loading...</h3>
                        <div class="subtitle">Traditional vs Democratic Workplace</div>
                    </div>
                    <div class="job-comparison-body" id="jobComparisonBody">
                        <!-- Dynamically loaded: Comparisons + Chat + Examples -->
                    </div>
                    
                    <!-- Floating Close Button (only close button, always visible) -->
                    <button class="job-floating-close" onclick="closeComparisonModal()" aria-label="Close" title="Close">
                        ‚úï
                    </button>
                </div>
            </div>
        </section>
        
        <script>
        /**
         * JOBS SECTION - INLINE JAVASCRIPT V35.2.0
         * All functionality embedded to bypass external file loading issues
         * Combined from jobs-modern.js with accordion toggle functions
         */
        
        /* State Management */
        const JobsModernState = {
            initialized: false,
            currentIndustry: null, // Start with no industry selected
            selectedProfession: null,
            chatHistory: [],
            inlineChatOpen: false,
            comparisonModalOpen: false,
            comparisonCache: {},
            userProfession: null
        };
        
        /* Industry Database */
        const INDUSTRIES_DATABASE = {
            technology: { name: 'Technology', icon: 'üíª', description: 'Software, IT, and digital innovation', professions: ['Software Developer', 'Data Scientist', 'IT Support Specialist', 'Cybersecurity Analyst', 'Web Developer', 'Mobile App Developer', 'DevOps Engineer', 'Cloud Architect', 'Database Administrator', 'Network Engineer', 'Systems Analyst', 'UX/UI Designer', 'Product Manager', 'Technical Writer', 'QA Engineer', 'Machine Learning Engineer', 'Full Stack Developer', 'Frontend Developer', 'Backend Developer', 'Game Developer', 'AI Engineer', 'Blockchain Developer', 'IoT Specialist', 'AR/VR Developer'] },
            healthcare: { name: 'Healthcare', icon: 'üè•', description: 'Medical, nursing, and health services', professions: ['Doctor', 'Nurse', 'Surgeon', 'Pharmacist', 'Physical Therapist', 'Dentist', 'Medical Technician', 'Healthcare Administrator', 'Paramedic', 'Radiologist', 'Psychiatrist', 'Pediatrician', 'Anesthesiologist', 'Cardiologist', 'Occupational Therapist', 'Speech Therapist', 'Nutritionist', 'Lab Technician', 'Medical Researcher', 'Public Health Specialist', 'Epidemiologist', 'Home Health Aide', 'Dental Hygienist', 'Medical Assistant', 'Respiratory Therapist', 'Ultrasound Technician'] },
            education: { name: 'Education', icon: 'üìö', description: 'Teaching, training, and academic work', professions: ['Teacher', 'Professor', 'School Principal', 'Education Administrator', 'Librarian', 'School Counselor', 'Special Education Teacher', 'Teaching Assistant', 'Curriculum Developer', 'Education Consultant', 'Adult Education Instructor', 'Early Childhood Educator', 'College Advisor', 'Tutor', 'Education Researcher', 'Distance Learning Coordinator', 'School Psychologist', 'Athletic Director', 'Academic Dean', 'Department Chair', 'ESL Teacher', 'Vocational Instructor'] },
            creative: { name: 'Creative Arts', icon: 'üé®', description: 'Design, media, and artistic professions', professions: ['Graphic Designer', 'Photographer', 'Video Editor', 'Animator', 'Illustrator', 'Art Director', 'Copywriter', 'Content Creator', 'Social Media Manager', 'Marketing Specialist', 'Brand Strategist', 'Film Director', 'Sound Engineer', 'Music Producer', 'Journalist', 'Editor', 'Public Relations Specialist', 'Event Planner', '3D Artist', 'Motion Graphics Designer', 'Creative Director'] },
            trades: { name: 'Skilled Trades', icon: 'üîß', description: 'Construction, repair, and technical skills', professions: ['Electrician', 'Plumber', 'Carpenter', 'Welder', 'HVAC Technician', 'Auto Mechanic', 'Construction Worker', 'Painter', 'Roofer', 'Mason', 'Pipefitter', 'Sheet Metal Worker', 'Landscaper', 'Heavy Equipment Operator', 'Locksmith', 'Glazier', 'Insulation Worker', 'Flooring Installer'] },
            service: { name: 'Service Industry', icon: 'üçΩÔ∏è', description: 'Hospitality, retail, and customer service', professions: ['Chef', 'Restaurant Manager', 'Barista', 'Bartender', 'Server', 'Hotel Manager', 'Retail Manager', 'Cashier', 'Sales Associate', 'Customer Service Representative', 'Flight Attendant', 'Housekeeper', 'Concierge', 'Event Coordinator', 'Travel Agent', 'Tour Guide'] },
            business: { name: 'Business & Finance', icon: 'üíº', description: 'Finance, management, and administration', professions: ['Accountant', 'Financial Analyst', 'Business Consultant', 'HR Manager', 'Project Manager', 'Operations Manager', 'Marketing Manager', 'Sales Manager', 'Investment Banker', 'Real Estate Agent', 'Insurance Agent', 'Auditor', 'Tax Preparer', 'Financial Advisor', 'Business Analyst', 'Supply Chain Manager'] },
            public_service: { name: 'Public Service', icon: 'üöí', description: 'Government, emergency, and community services', professions: ['Police Officer', 'Firefighter', 'Social Worker', 'Public Administrator', 'Urban Planner', 'Emergency Medical Technician', 'Park Ranger', 'Postal Worker', 'Court Reporter', 'Probation Officer', 'Public Defender', 'City Manager', 'Community Organizer', 'Nonprofit Director'] }
        };
        
        /* Initialization */
        function initializeJobsModern() {
            console.log('üíº Initializing Jobs Section V35.3.0 (Inline)...');
            if (JobsModernState.initialized) return;
            
            try {
                loadUserProfession();
                renderIndustryTabs();
                // Don't render any professions initially - wait for user selection
                setupInlineChat();
                loadComparisonCache();
                JobsModernState.initialized = true;
                console.log('‚úÖ Jobs section initialized successfully (no industry selected)');
            } catch (error) {
                console.error('‚ùå Jobs section initialization failed:', error);
            }
        }
        
        function loadUserProfession() {
            try {
                const saved = localStorage.getItem('wdp_user_profession');
                if (saved) JobsModernState.userProfession = JSON.parse(saved);
            } catch (error) {
                console.error('‚ùå Failed to load user profession:', error);
            }
        }
        
        function saveUserProfession(profession) {
            try {
                const data = { profession: profession, savedAt: new Date().toISOString() };
                localStorage.setItem('wdp_user_profession', JSON.stringify(data));
                JobsModernState.userProfession = data;
            } catch (error) {
                console.error('‚ùå Failed to save user profession:', error);
            }
        }
        
        /* Render Functions */
        function renderIndustryTabs() {
            const container = document.getElementById('jobsIndustryTabs');
            if (!container) return;
            
            const tabs = Object.entries(INDUSTRIES_DATABASE).map(([id, industry]) => {
                // No tabs are active initially
                return `<button class="jobs-industry-tab" onclick="switchIndustry('${id}')" data-industry="${id}">${industry.icon} ${industry.name}</button>`;
            }).join('');
            
            container.innerHTML = tabs;
        }
        
        function switchIndustry(industryId) {
            console.log('üîÑ Switching to industry:', industryId);
            
            // If clicking the same industry, deselect it
            if (JobsModernState.currentIndustry === industryId) {
                console.log('‚úÖ Deselecting industry:', industryId);
                JobsModernState.currentIndustry = null;
                document.querySelectorAll('.jobs-industry-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                clearProfessionCards();
                return;
            }
            
            // Otherwise, select the new industry
            JobsModernState.currentIndustry = industryId;
            document.querySelectorAll('.jobs-industry-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.industry === industryId);
            });
            renderProfessionCards(industryId);
        }
        
        function renderProfessionCards(industryId) {
            const container = document.getElementById('jobsProfessionsGrid');
            if (!container) return;
            
            const industry = INDUSTRIES_DATABASE[industryId];
            if (!industry) return;
            
            const cards = industry.professions.map(profession => {
                return `<div class="job-card" onclick="openComparisonModal('${profession}')">
                    <div class="job-icon">${industry.icon}</div>
                    <div class="job-title">${profession}</div>
                    <div class="job-preview">Discover how ${profession.toLowerCase()} work transforms in democratic workplaces.</div>
                    <button class="explore-btn" onclick="event.stopPropagation(); openComparisonModal('${profession}')">Compare Models ‚Üí</button>
                </div>`;
            }).join('');
            
            container.innerHTML = cards;
            container.classList.remove('hidden');
            console.log(`‚úÖ Rendered ${industry.professions.length} professions for ${industry.name}`);
        }
        
        function clearProfessionCards() {
            const container = document.getElementById('jobsProfessionsGrid');
            if (!container) return;
            container.innerHTML = '';
            container.classList.add('hidden');
            console.log('‚úÖ Cleared profession cards');
        }
        
        /* Comparison Modal */
        async function openComparisonModal(profession) {
            console.log('üîç Opening comparison for:', profession);
            JobsModernState.selectedProfession = profession;
            JobsModernState.comparisonModalOpen = true;
            
            if (!JobsModernState.userProfession) saveUserProfession(profession);
            
            const modal = document.getElementById('jobComparisonModal');
            if (!modal) return;
            modal.classList.add('active');
            
            const body = document.getElementById('jobComparisonBody');
            if (body) {
                body.innerHTML = `<div class="comparison-loading"><div class="spinner"></div><p>Loading comparison for ${profession}...</p></div>`;
            }
            
            const comparisonData = await loadComparisonData(profession);
            renderComparison(profession, comparisonData);
        }
        
        function closeComparisonModal() {
            const modal = document.getElementById('jobComparisonModal');
            if (modal) modal.classList.remove('active');
            JobsModernState.comparisonModalOpen = false;
            JobsModernState.selectedProfession = null;
        }
        
        async function loadComparisonData(profession) {
            if (JobsModernState.comparisonCache[profession]) {
                console.log('‚úÖ Cache hit:', profession);
                return JobsModernState.comparisonCache[profession];
            }
            return generateGenericComparison(profession);
        }
        
        function generateGenericComparison(profession) {
            return {
                profession: profession,
                traditional: {
                    'Decision Making': `In traditional ${profession.toLowerCase()} roles, decision-making typically flows from the top down. Management and leadership teams set strategic direction, allocate resources, and determine priorities.`,
                    'Compensation': `${profession} compensation in traditional workplaces usually consists of a fixed salary or hourly wage, often with annual raises based on performance reviews and market conditions.`,
                    'Work Direction': `Your day-to-day work is generally directed by supervisors, project managers, or department heads.`,
                    'Profit Sharing': `In most traditional settings, profits flow primarily to shareholders and executives.`,
                    'Job Security': `Your job security depends largely on factors outside your control‚Äîcompany profitability, market conditions, and executive decisions.`,
                    'Work-Life Balance': `Work-life balance policies are set by management and HR, reflecting organizational priorities that may or may not align with your needs.`
                },
                democratic: {
                    'Decision Making': `In a worker cooperative, you have real voting power on major decisions. Your expertise isn't just valued; it's essential to collective decision-making.`,
                    'Compensation': `Your compensation reflects the true value you create, with profit-sharing, patronage dividends, and benefits designed democratically.`,
                    'Work Direction': `You and your fellow worker-owners collectively determine how work is organized, with teams self-organizing based on expertise and interest.`,
                    'Profit Sharing': `Every dollar of surplus is shared among those who created it, distributed through democratic formulas.`,
                    'Job Security': `As a worker-owner, your security is built on collective ownership and democratic decision-making.`,
                    'Work-Life Balance': `Policies are created by the people they affect, honoring everyone's needs for rest, family time, and personal growth.`
                },
                transformations: [
                    { title: 'From Employee to Owner', description: `As a ${profession.toLowerCase()}, you transition from hired labor to democratic owner with equity, voting rights, and profit sharing.` },
                    { title: 'From Hierarchy to Democracy', description: 'Decision-making shifts from top-down management to collective governance through deliberation and voting.' },
                    { title: 'From Profit Extraction to Shared Prosperity', description: 'Value you create flows to worker-owners who generated it, not distant shareholders.' },
                    { title: 'From Precarity to Collective Security', description: 'Job security transforms from managerial whims to collective ownership and democratic accountability.' }
                ],
                examples: [
                    { name: 'Worker Cooperatives Worldwide', location: 'Global', description: 'Worker cooperatives exist in virtually every industry. Mondragon in Spain has 80,000+ worker-owners.', url: 'https://institute.coop/' },
                    { name: 'Platform Cooperatives', location: 'Digital/Global', description: 'Emerging platform cooperatives create democratic alternatives to gig economy exploitation.', url: 'https://platform.coop/' },
                    { name: 'Local Cooperative Development Centers', location: 'Your Community', description: 'Cooperative development organizations support creation of new worker cooperatives across industries.', url: 'https://usworker.coop/home/' }
                ],
                metadata: { generatedAt: new Date().toISOString(), source: 'generic_template', llmGenerated: false }
            };
        }
        
        function renderComparison(profession, data) {
            const body = document.getElementById('jobComparisonBody');
            if (!body) return;
            
            const header = document.getElementById('jobComparisonHeader');
            if (header) {
                header.innerHTML = `<h3>${profession}</h3><div class="subtitle">Traditional vs Democratic Workplace Comparison</div>`;
            }
            
            const categories = Object.keys(data.traditional);
            const comparisonHTML = categories.map(category => {
                return `<div class="comparison-section"><h4><span class="icon">${getCategoryIcon(category)}</span>${category}</h4>
                    <div class="comparison-grid">
                        <div class="comparison-card"><h5>Traditional Model</h5><p>${data.traditional[category]}</p></div>
                        <div class="comparison-card"><h5>Democratic Model</h5><p>${data.democratic[category]}</p></div>
                    </div></div>`;
            }).join('');
            
            const transformationsHTML = `<div class="comparison-section"><h4><span class="icon">üîÑ</span>Key Transformations</h4>
                <div class="transformation-list">${data.transformations.map(t => 
                    `<div class="transformation-item"><strong>${t.title}</strong><p>${t.description}</p></div>`
                ).join('')}</div></div>`;
            
            // AI Chat Assistant (collapsible accordion) - INSERTED BEFORE EXAMPLES
            const chatHTML = `<div class="comparison-section">
                <div class="job-modal-chat-accordion">
                    <div class="job-modal-chat-header" onclick="toggleJobModalChat()">
                        <span style="font-size: 1.5rem;">ü§ñ</span>
                        <h4 style="margin: 0; font-size: 1.125rem; color: white; font-weight: 600;">Ask About This Job</h4>
                        <span class="context-badge" id="jobContextBadge">${profession}</span>
                        <span class="job-modal-chat-arrow" id="jobModalChatArrow">‚ñº</span>
                    </div>
                    <div class="job-modal-chat-body" id="jobModalChatBody">
                        <div class="job-modal-chat-content">
                            <div class="job-modal-chat-messages" id="jobModalChatMessages">
                                <div class="job-modal-chat-message job-modal-chat-message-assistant">
                                    <strong>üëã Hi! I'm here to help with <span style="color: #38a169;">${profession}</span> questions!</strong><br><br>
                                    I'm contextually aware of this profession. Ask me about:<br>
                                    ‚Ä¢ How ${profession.toLowerCase()}s work in cooperatives<br>
                                    ‚Ä¢ Skills and qualifications needed<br>
                                    ‚Ä¢ Day-to-day responsibilities<br>
                                    ‚Ä¢ Transition from traditional to democratic workplaces<br>
                                    ‚Ä¢ Career paths and opportunities
                                </div>
                            </div>
                            <div class="job-modal-chat-input-container">
                                <input 
                                    type="text" 
                                    class="job-modal-chat-input" 
                                    id="jobModalChatInput" 
                                    placeholder="Ask about this profession (e.g., What's the salary difference?)"
                                    onkeypress="if(event.key==='Enter') sendJobModalChat()">
                                <button class="job-modal-chat-send" onclick="sendJobModalChat()">
                                    Send
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>`;
            
            const examplesHTML = `<div class="comparison-section"><h4><span class="icon">üè¢</span>Real-World Examples</h4>
                <div class="examples-grid">${data.examples.map(ex => 
                    `<div class="example-card"><h6>${ex.name}</h6><div class="location">üìç ${ex.location}</div>
                    <p>${ex.description}</p><a href="${ex.url}" target="_blank" rel="noopener noreferrer">Learn more ‚Üí</a></div>`
                ).join('')}</div></div>`;
            
            // Order: Comparisons + Transformations + Chat (collapsible) + Examples
            body.innerHTML = comparisonHTML + transformationsHTML + chatHTML + examplesHTML;
        }
        
        /* Job Modal AI Chat - Context Aware & Collapsible */
        function toggleJobModalChat() {
            const chatBody = document.getElementById('jobModalChatBody');
            const arrow = document.getElementById('jobModalChatArrow');
            
            if (!chatBody || !arrow) return;
            
            const isOpen = chatBody.classList.contains('active');
            
            if (isOpen) {
                chatBody.classList.remove('active');
                arrow.style.transform = 'rotate(0deg)';
            } else {
                chatBody.classList.add('active');
                arrow.style.transform = 'rotate(180deg)';
            }
        }
        
        function updateJobModalChatContext(profession) {
            // Context is now updated in renderComparison when HTML is generated
            // This function kept for compatibility but chat resets on each modal open
            const messagesContainer = document.getElementById('jobModalChatMessages');
            if (messagesContainer) {
                messagesContainer.innerHTML = `
                    <div class="job-modal-chat-message job-modal-chat-message-assistant">
                        <strong>üëã Hi! I'm here to help with <span style="color: #38a169;">${profession}</span> questions!</strong><br><br>
                        I'm contextually aware of this profession. Ask me about:<br>
                        ‚Ä¢ How ${profession.toLowerCase()}s work in cooperatives<br>
                        ‚Ä¢ Skills and qualifications needed<br>
                        ‚Ä¢ Day-to-day responsibilities<br>
                        ‚Ä¢ Transition from traditional to democratic workplaces<br>
                        ‚Ä¢ Career paths and opportunities
                    </div>
                `;
            }
        }
        
        function sendJobModalChat() {
            const input = document.getElementById('jobModalChatInput');
            const messagesContainer = document.getElementById('jobModalChatMessages');
            
            if (!input || !messagesContainer) return;
            
            const question = input.value.trim();
            if (!question) return;
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'job-modal-chat-message job-modal-chat-message-user';
            userMessage.textContent = question;
            messagesContainer.appendChild(userMessage);
            
            // Clear input
            input.value = '';
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Get current profession context
            const profession = JobsModernState.selectedProfession || 'this profession';
            
            // Generate AI response (simulated - replace with actual LLM API)
            setTimeout(() => {
                const aiMessage = document.createElement('div');
                aiMessage.className = 'job-modal-chat-message job-modal-chat-message-assistant';
                aiMessage.innerHTML = generateContextAwareResponse(question, profession);
                messagesContainer.appendChild(aiMessage);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);
        }
        
        function generateContextAwareResponse(question, profession) {
            // Context-aware response generator
            const lowerQuestion = question.toLowerCase();
            
            if (lowerQuestion.includes('skill') || lowerQuestion.includes('qualification')) {
                return `<strong>Skills for ${profession}:</strong><br><br>
                    In a democratic workplace, ${profession.toLowerCase()}s need both technical skills and collaborative abilities. 
                    Beyond standard qualifications, you'll benefit from:<br>
                    ‚Ä¢ Democratic decision-making participation<br>
                    ‚Ä¢ Transparent communication<br>
                    ‚Ä¢ Collective problem-solving<br>
                    ‚Ä¢ Financial literacy (understanding cooperative finances)<br><br>
                    The good news? Many worker cooperatives provide training in these areas!`;
            }
            
            if (lowerQuestion.includes('salary') || lowerQuestion.includes('pay') || lowerQuestion.includes('compensation')) {
                return `<strong>Compensation for ${profession}:</strong><br><br>
                    In worker cooperatives, ${profession.toLowerCase()}s typically receive:<br>
                    ‚Ä¢ Competitive base wages/salaries<br>
                    ‚Ä¢ <strong>Profit sharing</strong> - a share of surplus based on hours worked<br>
                    ‚Ä¢ <strong>Patronage dividends</strong> - returns based on participation<br>
                    ‚Ä¢ Democratic input on compensation structures<br><br>
                    Instead of executive bonuses, surplus flows to those who created the value!`;
            }
            
            if (lowerQuestion.includes('transition') || lowerQuestion.includes('switch') || lowerQuestion.includes('change')) {
                return `<strong>Transitioning to Cooperative ${profession} Work:</strong><br><br>
                    1. <strong>Research</strong>: Look for existing worker cooperatives in your field<br>
                    2. <strong>Network</strong>: Connect with cooperative development centers<br>
                    3. <strong>Start</strong>: Consider forming a cooperative with colleagues<br>
                    4. <strong>Learn</strong>: Many coops offer internships and trial periods<br><br>
                    Organizations like the US Federation of Worker Cooperatives can help connect you with opportunities!`;
            }
            
            if (lowerQuestion.includes('day') || lowerQuestion.includes('typical') || lowerQuestion.includes('daily')) {
                return `<strong>Day-to-Day as a ${profession} in a Co-op:</strong><br><br>
                    Your daily work is similar to traditional roles, but with key differences:<br>
                    ‚Ä¢ <strong>More autonomy</strong> in how you organize work<br>
                    ‚Ä¢ <strong>Democratic meetings</strong> for major decisions (usually monthly)<br>
                    ‚Ä¢ <strong>Transparency</strong> - access to financial information<br>
                    ‚Ä¢ <strong>Collective responsibility</strong> for outcomes<br><br>
                    You're not just doing the work‚Äîyou're helping steer the organization!`;
            }
            
            // Default contextual response
            return `<strong>About ${profession} in Worker Cooperatives:</strong><br><br>
                Great question! In worker cooperatives, ${profession.toLowerCase()}s maintain their professional expertise while gaining 
                democratic ownership and decision-making power. You'll work in a more transparent, equitable environment where your voice matters.<br><br>
                <strong>Key benefits:</strong><br>
                ‚Ä¢ Democratic governance (1 worker = 1 vote)<br>
                ‚Ä¢ Profit sharing based on work contribution<br>
                ‚Ä¢ Greater job security through collective ownership<br>
                ‚Ä¢ Work-life balance set democratically<br><br>
                Want to know more specifics? Feel free to ask follow-up questions!`;
        }
        
        function getCategoryIcon(category) {
            const icons = { 'Decision Making': 'üó≥Ô∏è', 'Compensation': 'üí∞', 'Work Direction': 'üéØ', 'Profit Sharing': 'üìà', 'Job Security': 'üîí', 'Work-Life Balance': '‚öñÔ∏è' };
            return icons[category] || 'üìã';
        }
        
        function loadComparisonCache() {
            try {
                const cached = localStorage.getItem('wdp_job_comparisons_cache');
                if (cached) JobsModernState.comparisonCache = JSON.parse(cached);
            } catch (error) {
                console.error('‚ùå Failed to load comparison cache:', error);
            }
        }
        
        /* Inline Chat Widget */
        function setupInlineChat() {
            const chatInput = document.getElementById('jobsInlineChatInput');
            const chatSend = document.getElementById('jobsInlineChatSend');
            
            if (chatInput && chatSend) {
                chatSend.addEventListener('click', sendInlineChatMessage);
                chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendInlineChatMessage();
                    }
                });
            }
            loadChatHistory();
        }
        
        // CRITICAL FIX: Toggle functions with .active class handling
        // RENAMED to avoid conflict with inline-civic-chat.js
        function toggleJobsInlineChat() {
            console.log('üîÑ Toggling Jobs inline chat');
            const chatWindow = document.getElementById('jobsInlineChatWindow');
            const chatToggle = document.getElementById('jobsInlineChatToggle');
            
            if (!chatWindow || !chatToggle) return;
            
            JobsModernState.inlineChatOpen = !JobsModernState.inlineChatOpen;
            const arrow = chatToggle.querySelector('.arrow');
            
            if (JobsModernState.inlineChatOpen) {
                chatWindow.classList.add('active');
                chatToggle.classList.add('active');
                if (arrow) arrow.style.transform = 'rotate(180deg)';
                console.log('‚úÖ Chat opened');
            } else {
                chatWindow.classList.remove('active');
                chatToggle.classList.remove('active');
                if (arrow) arrow.style.transform = 'rotate(0deg)';
                console.log('‚úÖ Chat closed');
            }
        }
        
        function toggleJobsExplore() {
            console.log('üîÑ Toggling explore accordion');
            const content = document.getElementById('jobsExploreContent');
            const header = content?.previousElementSibling;
            const arrow = header?.querySelector('.arrow');
            
            if (!content || !header) return;
            
            const isOpen = content.classList.contains('active');
            
            if (isOpen) {
                content.classList.remove('active');
                header.classList.remove('active');
                if (arrow) arrow.style.transform = 'rotate(0deg)';
                console.log('‚úÖ Explore closed');
            } else {
                content.classList.add('active');
                header.classList.add('active');
                if (arrow) arrow.style.transform = 'rotate(180deg)';
                console.log('‚úÖ Explore opened');
            }
        }
        
        async function sendInlineChatMessage() {
            const input = document.getElementById('jobsInlineChatInput');
            if (!input) return;
            
            const message = input.value.trim();
            if (!message) return;
            
            input.value = '';
            addChatMessage(message, 'user');
            const response = await generateChatResponse(message);
            addChatMessage(response, 'assistant');
            saveChatHistory();
        }
        
        function addChatMessage(text, role) {
            const messagesContainer = document.getElementById('jobsInlineChatMessages');
            if (!messagesContainer) return;
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `jobs-inline-chat-message jobs-inline-chat-message-${role}`;
            messageDiv.textContent = text;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            JobsModernState.chatHistory.push({ role, text, timestamp: new Date().toISOString() });
        }
        
        async function generateChatResponse(query) {
            const queryLower = query.toLowerCase();
            
            if (queryLower.match(/how (?:does|do) (.+?) work/)) {
                return `Great question! To learn how that profession works in democratic workplaces, click on it in the jobs grid above. You'll see detailed comparisons and real examples!`;
            }
            
            if (queryLower.includes('worker cooperative') || queryLower.includes('what is a co-op')) {
                return `A worker cooperative is a business owned and democratically controlled by its employees! Features:

üó≥Ô∏è Democratic Ownership
üí∞ Profit Sharing
üéØ Collective Management
üîí Job Security`;
            }
            
            if (queryLower.includes('how much') || queryLower.includes('salary')) {
                return `Salaries in worker cooperatives often match or exceed traditional workplaces, plus profit-sharing! Click any job above for specific details.`;
            }
            
            return `I'm here to help! You can:\\nüíº Click professions above for comparisons\\nüìö Ask about worker cooperatives\\nüîç Search for specific jobs`;
        }
        
        function loadChatHistory() {
            try {
                const saved = localStorage.getItem('wdp_jobs_chat_history');
                if (saved) {
                    JobsModernState.chatHistory = JSON.parse(saved);
                    const messagesContainer = document.getElementById('jobsInlineChatMessages');
                    if (messagesContainer) {
                        JobsModernState.chatHistory.forEach(msg => {
                            const messageDiv = document.createElement('div');
                            messageDiv.className = `jobs-inline-chat-message jobs-inline-chat-message-${msg.role}`;
                            messageDiv.textContent = msg.text;
                            messagesContainer.appendChild(messageDiv);
                        });
                    }
                }
            } catch (error) {
                console.error('‚ùå Failed to load chat history:', error);
            }
        }
        
        function saveChatHistory() {
            try {
                const recentHistory = JobsModernState.chatHistory.slice(-50);
                localStorage.setItem('wdp_jobs_chat_history', JSON.stringify(recentHistory));
            } catch (error) {
                console.error('‚ùå Failed to save chat history:', error);
            }
        }
        
        /* Initialize on DOM ready - no auto-open to reduce scrolling */
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM loaded - initializing Jobs section');
            initializeJobsModern();
            console.log('‚úÖ Jobs section ready - accordions closed by default');
        });
        
        /* Export functions for global access */
        window.switchIndustry = switchIndustry;
        window.openComparisonModal = openComparisonModal;
        window.closeComparisonModal = closeComparisonModal;
        window.toggleJobsInlineChat = toggleJobsInlineChat;
        window.toggleJobsExplore = toggleJobsExplore;
        </script>

        <!-- Ethical Business Finder Section -->
        <section id="ethical-business" class="ethical-business-section section">
            <div class="ethical-business-container">
                <!-- Community Services Widget (V37.8.7 - ACTIVATED) -->
                <!-- Widget will render automatically via community-services.js on DOMContentLoaded -->
                <!-- Includes: Category browsing + ZIP search (Option C) + Phase 1 enhanced modal -->
                <div id="communityServicesWidget">
                    <!-- JavaScript will populate this div with the full community services widget -->
                </div>

                <!-- Ethical Business Chat Widget (Standardized to match Jobs) -->
                <div class="ethical-chat-top">
                    <button class="ethical-chat-toggle-top" id="ethicalChatToggleTop" aria-label="Toggle ethical business chat">
                        <span class="icon">üí¨</span>
                        <span>Ask About Cooperatives & Ethical Business</span>
                        <span class="arrow">‚ñº</span>
                    </button>
                    
                    <div class="ethical-chat-window-top" id="ethicalChatWindowTop">
                        <div class="ethical-chat-header-top">
                            <h4>Ethical Business Assistant</h4>
                            <button class="ethical-chat-close-top" id="ethicalChatCloseTop" aria-label="Close chat">
                                ‚úï
                            </button>
                        </div>
                        
                        <div class="ethical-chat-messages-top" id="ethicalChatMessagesTop">
                            <div class="ethical-chat-empty-state-top">
                                <!-- Orange gradient handshake SVG -->
                                <svg class="chat-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                                    <defs>
                                        <linearGradient id="ethicalChatGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#FF9A56;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#F4A261;stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <!-- Left hand -->
                                    <path d="M 20 50 L 35 45 L 40 48 L 42 52 L 40 56 L 35 58 L 25 55 Z" 
                                          fill="url(#ethicalChatGrad)" stroke="none"/>
                                    <!-- Right hand -->
                                    <path d="M 80 50 L 65 45 L 60 48 L 58 52 L 60 56 L 65 58 L 75 55 Z" 
                                          fill="url(#ethicalChatGrad)" stroke="none"/>
                                    <!-- Handshake center -->
                                    <rect x="38" y="45" width="24" height="14" rx="2" fill="url(#ethicalChatGrad)" stroke="none"/>
                                    <!-- Fingers interlocked -->
                                    <circle cx="42" cy="52" r="3" fill="white" opacity="0.9"/>
                                    <circle cx="50" cy="52" r="3" fill="white" opacity="0.9"/>
                                    <circle cx="58" cy="52" r="3" fill="white" opacity="0.9"/>
                                </svg>
                                <p>Welcome! I'm your AI-powered ethical business assistant.</p>
                                <p>Ask me about worker cooperatives, ethical businesses, community services, and social enterprises. I can help you understand democratic workplaces and find ethical businesses near you.</p>
                            </div>
                        </div>
                        
                        <div class="ethical-chat-input-container-top">
                            <textarea 
                                id="ethicalChatInputTop" 
                                class="ethical-chat-input-top"
                                placeholder="Ask about cooperatives, ethical businesses..."
                                aria-label="Chat input"
                                rows="1"
                            ></textarea>
                            <button class="ethical-chat-send-top" id="ethicalChatSendTop" aria-label="Send message">
                                ‚úàÔ∏è
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>




    </main>

    <!-- Support Card (Bottom of page - Less intrusive) -->
    <section style="padding: 2rem; background: #FFF9F0;">
        <div class="container" style="max-width: 1200px; margin: 0 auto;">
            <div style="background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%); border-radius: 16px; padding: 2rem; box-shadow: 0 4px 12px rgba(78, 205, 196, 0.2); text-align: center;">
                <h3 style="color: white; font-size: 1.5rem; margin: 0 0 0.5rem; font-weight: 700;">
                    üíù Support This Work
                </h3>
                <p style="color: white; opacity: 0.95; margin: 0 0 1.5rem; line-height: 1.6; font-size: 1rem; max-width: 600px; margin-left: auto; margin-right: auto;">
                    Built by a solo developer with community support. Your voluntary contribution helps make this a full-time mission‚Äîsustaining development, funding community programs, and keeping every feature free for everyone.
                </p>
                <div style="text-align: center;">
                    <a href="donate.html" style="display: inline-block; background: white; color: #44A08D; padding: 1rem 2rem; border-radius: 50px; font-weight: 700; font-size: 1.0625rem; text-decoration: none; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); transition: all 0.3s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(0,0,0,0.2)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)';">
                        Learn More
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="site-footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 class="footer-title" data-translate="footer_about">About</h3>
                    <p data-translate="footer_about_text">
                        Workforce Democracy Project is a non-partisan educational resource 
                        exploring democratic workplaces and government transparency. 
                        Completely free, privacy-first, and ad-free forever.
                    </p>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title" data-translate="footer_privacy">Privacy & Security</h3>
                    <ul class="footer-links">
                        <li><a href="privacy.html" data-translate="footer_privacy_policy">Personalization & Privacy</a></li>
                        <li><a href="analytics.html">üìä Your Analytics Dashboard</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title" data-translate="footer_connect">Connect</h3>
                    <p data-translate="footer_connect_text">
                        Questions? Suggestions? We'd love to hear from you.
                    </p>
                    <button class="btn btn-secondary" onclick="showContactForm()" data-translate="footer_contact">
                        Contact Us
                    </button>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">üíù Support Our Work</h3>
                    <p style="font-size: 0.9375rem; line-height: 1.6; margin-bottom: 1rem;">
                        Help us keep this platform free forever. Every contribution supports continued development and community programs.
                    </p>
                    <div style="text-align: center;">
                        <a href="donate.html" class="btn btn-secondary" style="display: inline-block; text-decoration: none;">
                            Learn More
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="copyright">
                    &copy; 2025 Workforce Democracy Project. 
                    <span data-translate="footer_rights">All content freely available under Creative Commons.</span>
                </p>
                <p class="footer-note">
                    <i class="fas fa-shield-alt"></i>
                    <span data-translate="footer_tracking">Zero tracking. Zero ads. Complete privacy.</span>
                </p>
            </div>
        </div>
    </footer>

    <!-- Modal Container -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal()"></div>
    <div class="modal-container" id="modalContainer"></div>

    <!-- Netlify Forms: Hidden form for detection (required for Netlify to recognize the form) -->
    <!-- This form is never shown to users - it's only for Netlify's build process -->
    <form name="contact" netlify netlify-honeypot="bot-field" hidden>
        <input type="hidden" name="bot-field" />
        <input type="hidden" name="form-name" value="contact" />
        <input type="text" name="submission-id" />
        <input type="text" name="name" />
        <input type="email" name="email" />
        <input type="text" name="subject" />
        <textarea name="message"></textarea>
    </form>

    <!-- Language Selector Modal -->
    <div class="modal-overlay" id="languageModalOverlay" onclick="closeLanguageModal()"></div>
    <div class="language-modal" id="languageModal">
        <div class="language-modal-header">
            <h2 class="language-modal-title">
                <i class="fas fa-globe"></i>
                <span data-translate="language_modal_title">Select Language</span>
            </h2>
            <button class="language-modal-close" onclick="closeLanguageModal()" aria-label="Close language selector">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="language-modal-content">
            <button class="language-option" data-lang="en" onclick="selectLanguageFromModal('en')">
                <span class="language-flag">üá¨üáß</span>
                <span class="language-name">English</span>
            </button>
            <button class="language-option" data-lang="es" onclick="selectLanguageFromModal('es')">
                <span class="language-flag">üá™üá∏</span>
                <span class="language-name">Espa√±ol</span>
            </button>
            <button class="language-option" data-lang="fr" onclick="selectLanguageFromModal('fr')">
                <span class="language-flag">üá´üá∑</span>
                <span class="language-name">Fran√ßais</span>
            </button>
            <button class="language-option" data-lang="de" onclick="selectLanguageFromModal('de')">
                <span class="language-flag">üá©üá™</span>
                <span class="language-name">Deutsch</span>
            </button>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div class="loading-indicator" id="loadingIndicator">
        <div class="spinner"></div>
        <p data-translate="loading">Loading...</p>
    </div>

    <!-- Scripts -->
    <!-- Configuration (MUST load first - defines CONFIG global variable) -->
    <!-- V37.1.0: Added defer for non-blocking load -->
    <script src="js/config.js?v=20250127-V36.2.0" defer></script>
    <!-- V36.11.9: Backend API Integration (enhanced CORS/HTTP error logging) -->
    <script src="js/backend-api.js?v=36.11.9&t=1730601200"></script>
    <!-- V37.4.1: ALL old citation/markdown renderers REMOVED - clean chat system handles everything -->
    <!-- V37.11.4: NEW Zero-Knowledge Personalization System -->
    <!-- V37.11.7: localStorage Protection MUST load FIRST to intercept any clearing -->
    <script src="LOCALSTORAGE-PROTECTION-FIX.js?v=37.11.7-DIAGNOSTIC"></script>
    <script src="js/crypto-utils.js?v=38.0.0-PERSONALIZATION"></script>
    <script src="js/personalization-system.js?v=38.0.0-PERSONALIZATION"></script>
    <script src="js/personalization-ui.js?v=38.0.0-PERSONALIZATION"></script>
    <script>
      // Initialize personalization system when DOM is ready
      window.addEventListener('DOMContentLoaded', () => {
        PersonalizationSystem.init();
      });
    </script>
    <!-- V36.5.3: OLD personalization REMOVED - using new zero-knowledge system -->
    <!-- Chart.js CDN (V36.5.1: Removed outdated integrity hash) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" 
            crossorigin="anonymous" defer></script>
    <!-- Critical scripts (no defer - needed for immediate functionality) -->
    <script src="js/security.js?v=20250122-HORIZONTAL-TABS"></script>
    <script src="js/language.js?v=20250122-HORIZONTAL-TABS"></script>
    <!-- V36.9.10: In-House Privacy-First Analytics (NO external tracking) -->
    <script src="js/analytics-tracker.js?v=36.9.10-INHOUSE" defer></script>
    <!-- V36.9.10: Analytics-Driven Personalization -->
    <!-- DISABLED Nov 16, 2025: Conflicts with NEW personalization system -->
    <!-- Will be integrated into unified system in Phase 2 -->
    <!-- <script src="js/analytics-personalization.js?v=36.9.10-PERSONALIZE" defer></script> -->
    <!-- V36.9.11: Form Validation (Task #17 - Privacy-First) -->
    <script src="js/form-validator.js?v=36.9.11-VALIDATION" defer></script>
    <!-- V36.9.13: Keyboard Enhancements (Modal trapping active, arrow keys disabled for bugfix) -->
    <script src="js/keyboard-enhancements.js?v=36.9.13-BUGFIX" defer></script>
    <!-- Non-critical scripts (defer for faster page load) -->
    <script src="js/charts.js?v=20250122-HORIZONTAL-TABS" defer></script>
    <script src="js/helpful-suggestions.js?v=20250124-V32.9.6-INITIAL" defer></script>
    <script src="js/smart-local-tools.js?v=20250125-V34.0.1-FIX3" defer></script>
    <!-- V35.7.6: Removed unified-onboarding.js - using custom modal instead (see Custom Welcome Modal JavaScript below) -->
    <script src="js/civic-data-loader.js" defer></script>
    
    <!-- V37.16.0 FIX #5: REMOVED civic-test.js - was overriding switchCivicTab! -->
    <!-- PROBLEM: civic-test.js loaded AFTER civic-platform.js and overwrote the fixed version -->
    <!-- This caused BOTH bills-panel AND representatives-panel to have 'active' class -->
    <!-- <script src="js/civic-test.js?v=TEST" defer></script> -->
    
    <!-- V37.16.0: Civic Platform - Fixed active class override -->
    <script src="js/civic-platform.js?v=37.16.0-FINAL-FIX" defer></script>
    
<!-- ORIGINAL: <script src="js/civic.js?v=36.9.15-ALL-COMMENTS-FIXED" defer></script> -->
    <!-- V37.17.0: Smart Search Enhancer - FREE Intelligence Layer -->
    <script src="js/smart-search-enhancer.js?v=37.17.0-SMART-STATIC" defer></script>
    <!-- V37.17.0: Enhanced Civic Representative Finder with Smart Contact Buttons -->
    <script src="js/civic-representative-finder.20251216T1000.js" defer></script>
    <!-- V37.16.0: AGGRESSIVE AUTO-LOAD PERSONALIZATION - Option A's implemented (all-in-one) -->
    <script src="js/rep-finder-simple.js?v=37.16.0-FIXED" defer></script>
    <!-- V36.4.1: Removed js/civic-chat.js - redundant (inline chats cover all needs) -->
    <!-- V37.4.1: Removed bills-chat.js - replaced by chat-clean.js -->
    <script src="js/bills-section.js?v=37.16.0-TAB-AWARE" defer></script>
    <script src="js/civic-voting.js?v=20250122-HORIZONTAL-TABS" defer></script>
    <script src="js/civic-dashboard.js?v=20250125-V34.3.0-INITIAL" defer></script>
    <!-- V37.4.1: Removed inline-civic-chat.js - replaced by chat-clean.js -->
    <script src="js/voting-info.js?v=20250127-V36.1.0-INITIAL" defer></script>
    <script src="js/voting-assistant.js?v=20250127-V36.1.0-INITIAL" defer></script>
    <!-- V37.4.1: Removed candidate-analysis.js - replaced by chat-clean.js -->
    <!-- jobs-modern.js removed - all JavaScript now inline in Jobs section (V35.2.0) -->
    <script src="js/collapsible.js?v=20250122-HORIZONTAL-TABS" defer></script>
    <!-- V36.5.3: personalization.js moved to early load section (line 3625) -->
    <!-- V36.9.0: Replaced with community-services.js (see line 3548) -->
    <!-- <script src="js/ethical-business.js?v=20250129-V36.5.2-WINDOW-EXPORT"></script> -->
    <!-- V37.4.1: Removed ethical-business-chat.js - replaced by chat-clean.js -->
    <!-- V37.4.1: Removed chat-input-scroll.js - replaced by chat-clean.js -->
    
    <!-- V37.4.1: CLEAN CHAT SYSTEM - NO TYPEWRITER, INSTANT CITATIONS -->
    <!-- User reported: typewriter effect broke citations, created 20+ failed fix attempts -->
    <!-- Solution: Complete rebuild with instant text display + simple superscripts ¬π ¬≤ ¬≥ -->
    <script src="js/chat-clean.20251216T1000.js" defer></script>
    <script src="js/nonprofit-widgets.js?v=36.11.6-ESCAPE-FIX&t=1730592000" defer></script>
    <!-- V37.8.7: Community Services with Phase 1 Enhancements (distance, categories, languages, accessibility) -->
    <script src="js/community-services.js?v=37.8.7-PHASE1-ACTIVATED&t=1731276000" defer></script>
    <script src="js/main.20251216T1000.js" defer></script>
    
    <!-- V24: No force-svg script needed - SVGs are inline! -->

    <!-- Initialize Sections -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize civic dashboard V34.3.0
            if (document.getElementById('personalDashboardContainer')) {
                // Wait for civic voting data to load, then initialize dashboard
                setTimeout(() => {
                    if (typeof initializeCivicDashboard === 'function') {
                        initializeCivicDashboard();
                    }
                }, 500);
            }
            
            // Display upcoming bills
            if (document.getElementById('upcomingBillsContainer')) {
                displayUpcomingBills();
            }
            
            // V37.16.0: DISABLED - This was causing bills to render on EVERY tab
            // Bills are now handled by js/bills-section.js with tab-aware initialization
            // if (document.getElementById('billsListContainer')) {
            //     displayBillsList('all');
            // }
        });
    </script>

    <!-- Service Worker DISABLED - Causing reload loop and preventing updates -->
    <script>
        // V24 - Service Worker completely disabled to fix issues
        // Was causing: double modal loads, slow loading, prevented CSS updates
        if ('serviceWorker' in navigator) {
            // Unregister any existing service workers
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    registration.unregister();
                    console.log('Service worker unregistered');
                }
            });
        }
        
        // Clear any old caches one time only
        if ('caches' in window && !sessionStorage.getItem('caches-cleared-v42w')) {
            caches.keys().then(function(cacheNames) {
                Promise.all(
                    cacheNames.map(function(cacheName) {
                        return caches.delete(cacheName);
                    })
                ).then(function() {
                    sessionStorage.setItem('caches-cleared-v42w', 'true');
                    console.log('V42W: Old caches cleared');
                });
            });
        }
    </script>
    
    <!-- V29: Diagnostic disabled for clean test -->
    <!-- <script src="js/simple-diagnostic-v28.js"></script> -->
    
    <!-- V37.9.1: Welcome Modal JavaScript COMPLETELY REMOVED -->
    <!-- Navigation & Personalization Functions -->
    <script>
        // V37.9.1: Simplified navigation function (welcome modal removed)
        window.navigateToSection = function(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                // Scroll to top first, then to section
                window.scrollTo({ top: 0, behavior: 'smooth' });
                setTimeout(() => {
                    section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 300);
            }
        };
        
        // V37.9.1: Streamlined personalization save function
        window.saveV37Personalization = function() {
            const zipcodeInput = document.getElementById('v37PersonalizationZipcode');
            const statusDiv = document.getElementById('v37PersonalizationStatus');
            const zipcode = zipcodeInput.value.trim();
            
            if (!zipcode) {
                statusDiv.innerHTML = '‚ö†Ô∏è Please enter a zipcode';
                statusDiv.style.display = 'block';
                statusDiv.style.color = '#fed7d7';
                zipcodeInput.focus();
                setTimeout(() => { statusDiv.style.display = 'none'; }, 3000);
                return;
            }
            
            // Save to localStorage (compatible with existing personalization system)
            const locationData = {
                postcode: zipcode,
                zipcode: zipcode,
                savedAt: new Date().toISOString(),
                version: 'v37.9.1'
            };
            
            localStorage.setItem('wdp_user_location', JSON.stringify(locationData));
            localStorage.setItem('wdp_personalization_enabled', 'true');
            localStorage.setItem('wdp_personalization_choice', 'enabled');
            localStorage.setItem('wdp_personalization_zipcode', zipcode);
            
            console.log('[V37.9.1 Personalization] ‚úÖ Zipcode saved:', zipcode);
            
            // Visual feedback
            statusDiv.innerHTML = '‚úÖ Zipcode saved! All civic features are now personalized.';
            statusDiv.style.display = 'block';
            statusDiv.style.color = '#c6f6d5';
            
            // Trigger refresh of personalized features (if functions exist)
            if (typeof initializePersonalizationFeatures === 'function') {
                initializePersonalizationFeatures();
            }
            if (typeof refreshBillsSection === 'function') {
                refreshBillsSection();
            }
            
            // Hide status after 5 seconds
            setTimeout(() => { statusDiv.style.display = 'none'; }, 5000);
        };
        
        // V37.9.1: Load saved zipcode on dashboard load
        window.addEventListener('DOMContentLoaded', function() {
            const savedLocation = localStorage.getItem('wdp_user_location');
            if (savedLocation) {
                try {
                    const locationData = JSON.parse(savedLocation);
                    const zipcodeInput = document.getElementById('v37PersonalizationZipcode');
                    if (zipcodeInput && (locationData.zipcode || locationData.postcode)) {
                        zipcodeInput.value = locationData.zipcode || locationData.postcode;
                        const statusDiv = document.getElementById('v37PersonalizationStatus');
                        statusDiv.innerHTML = '‚úÖ Personalization active';
                        statusDiv.style.display = 'block';
                        statusDiv.style.color = '#c6f6d5';
                    }
                } catch (e) {
                    console.warn('[V37.9.1 Personalization] Failed to load saved zipcode:', e);
                }
            }
        });
        
        console.log('[V37.9.1] ‚úÖ Navigation & Personalization initialized');
    </script>
    
    <!-- V36.8.1: ProPublica Nonprofit Explorer Integration -->
    <script src="js/nonprofit-explorer.js"></script>
    <!-- nonprofit-widgets.js already loaded earlier with defer attribute (line 3717) -->

    <!-- ========================================================================== -->
    <!-- V37.11.4: PERSONALIZATION SYSTEM HTML (Zero-Knowledge Encryption)         -->
    <!-- ========================================================================== -->

    <!-- Setup Wizard Modal -->
    <div id="personalization-overlay" class="personalization-modal-overlay">
        <div class="personalization-modal">
            <div id="setup-wizard" class="setup-wizard">
                <h2 class="wizard-title">üéØ Complete Your Setup</h2>
                <p class="wizard-subtitle">One-time setup for full personalization</p>
                
                <!-- Progress Indicator -->
                <div class="setup-wizard-progress">
                    <div class="progress-dot active" data-step="1"></div>
                    <div class="progress-dot" data-step="2"></div>
                    <div class="progress-dot" data-step="3"></div>
                </div>
                
                <!-- Step 0: Privacy mode selection -->
                <div class="wizard-step active" data-step="0">
                    <h3>Privacy first</h3>
                    <p>Choose how you want to store your data. You can change this later.</p>
                    <div class="card-grid">
                        <label class="card option">
                            <input type="radio" name="mode" value="local" checked>
                            <div class="card-body">
                                <h4>Local‚Äëonly (recommended)</h4>
                                <p>All data stays on this device. No account. You can enable sync later.</p>
                            </div>
                        </label>
                        <label class="card option">
                            <input type="radio" name="mode" value="sync">
                            <div class="card-body">
                                <h4>Enable Sync (advanced)</h4>
                                <p>Encrypt with a passphrase and sync across devices. Optional email for recovery.</p>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Step 1A: Local‚Äëonly credentials (no network calls) -->
                <div class="wizard-step" data-step="1-local">
                    <h3>Create a local unlock passphrase</h3>
                    <input id="local-pass" type="password" class="form-control" autocomplete="new-password" placeholder="Enter a passphrase (min 6 chars)">
                    <p class="hint">Used only on this device to unlock your data. Not sent anywhere.</p>
                </div>

                <!-- Step 1B: Sync credentials (optional email) -->
                <div class="wizard-step" data-step="1-sync">
                    <h3>Create a passphrase</h3>
                    <div class="form-group">
                        <label for="sync-username">Username</label>
                        <input id="sync-username" type="text" class="form-control" autocomplete="username" placeholder="Choose a username">
                        <div class="help-text">3‚Äì50 chars, start with a letter. Only letters, numbers, _ and -.</div>
                        <div class="field-error" aria-live="polite"></div>
                    </div>
                    <div class="form-group">
                        <label for="sync-pass">Passphrase</label>
                        <input id="sync-pass" type="password" class="form-control" autocomplete="new-password" placeholder="Create a passphrase (min 8 chars)">
                        <div id="pass-strength" class="password-strength">
                            <div class="password-strength-bar"></div>
                            <span class="password-strength-text"></span>
                        </div>
                        <div class="help-text">Use 8+ chars with upper/lowercase, a number, and a symbol.</div>
                        <div class="field-error" aria-live="polite"></div>
                    </div>
                    <label class="toggle"><input id="opt-email-toggle" type="checkbox"> Add email for recovery (optional)</label>
                    <input id="sync-email" type="email" class="form-control" placeholder="Email (optional)" style="display:none">
                    <label class="consent"><input id="consent-encryption" type="checkbox"> I understand my data is encrypted on my device before sync.</label>
                </div>

                <!-- Step 2: Recovery Kit -->
                <div class="wizard-step" data-step="2">
                    <h3>Save your Recovery Kit</h3>
                    <p>Write down your 12‚Äëword phrase. You can also download an encrypted recovery file.</p>
                    <div id="recovery-phrase" class="recovery-key-display">‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢</div>
                    <div class="wizard-buttons-inline">
                        <button type="button" id="download-recovery" class="btn-secondary">üíæ Download Recovery File</button>
                    </div>
                    <label class="consent"><input id="ack-recovery" type="checkbox"> I have saved my recovery phrase.</label>
                </div>
                
                <!-- Wizard Buttons -->
                <div class="wizard-buttons">
                    <button type="button" id="wizardPrevBtn" class="btn-secondary" onclick="wizardPrevStep()" style="display: none;">‚Üê Back</button>
                    <button type="button" id="wizardNextBtn" class="btn-primary" onclick="wizardNextStep()">Next ‚Üí</button>
                    <button type="button" id="wizardCompleteBtn" class="btn-primary" onclick="completeSetup()" style="display: none;">‚úÖ Complete Setup</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="personalization-modal-overlay" style="display: none;">
        <div class="personalization-modal login-modal">
            <button class="modal-close" onclick="document.getElementById('login-modal').style.display='none'">√ó</button>
            <h2>üîê Sign In</h2>
            <form id="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginUsername">Username</label>
                    <input type="text" id="login-username" class="form-control" 
                           placeholder="Enter your username" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="login-password" class="form-control" 
                           placeholder="Enter your password" required>
                </div>
                <button type="submit" class="btn-primary btn-block">Sign In</button>
            </form>
            <div id="login-error" class="error-message" style="display: none;"></div>
        </div>
    </div>

    <!-- Welcome Banner (shown to new/logged-out users) -->
    <div id="welcome-banner" class="personalization-banner" style="display: none;">
        <button class="banner-close" onclick="document.getElementById('welcome-banner').style.display='none'">√ó</button>
        <div class="banner-content">
            <h3>üëã Welcome to Workforce Democracy!</h3>
            <p>Get personalized recommendations, track your engagement, and sync across all your devices.</p>
            <div class="banner-actions">
                <button onclick="openSetupWizard()" class="btn-primary">Get Started</button>
                <button onclick="openLoginModal()" class="btn-secondary">Sign In</button>
            </div>
        </div>
    </div>

    <!-- Account Indicator (shown when logged in) -->
    <div id="accountIndicator" class="account-indicator" style="display: none;">
        <button class="account-button" onclick="toggleAccountMenu()">
            <span class="account-username"></span>
            <span class="account-icon">üë§</span>
        </button>
        <div id="accountDropdown" class="account-dropdown" style="display: none;">
            <div class="account-dropdown-header">
                <strong class="account-dropdown-username"></strong>
                <span class="account-sync-status">Last sync: <span id="lastSyncTime">Never</span></span>
            </div>
            <div class="account-dropdown-actions">
                <button onclick="PersonalizationSystem.exportData()">üì• Export Data</button>
                <button onclick="showAddressUpdate()">üìç Update Address</button>
                <button onclick="showSettings()">‚öôÔ∏è Settings</button>
                <button onclick="PersonalizationSystem.logout()">üö™ Sign Out</button>
                <button onclick="confirmDeleteAccount()" class="danger">üóëÔ∏è Delete Account</button>
            </div>
        </div>
    </div>

<!-- Loading Indicator -->
    <div id="personalizationLoading" class="loading" style="display: none;">
        <div class="spinner"></div>
        <p>Processing...</p>
    </div>

    <!-- Success Message Toast -->
    <div id="successToast" class="success-message" style="display: none;"></div>

    <!-- TEST BACKEND OVERRIDE - v37.18.7: Routes API calls to Version B (port 3002) via /test route -->
    <!-- IMPORTANT: This script ONLY for testing on GenSpark (sxcrlfyt.gensparkspace.com) -->
    <!-- Remove this script tag when deploying to production -->
    <!--<script src="js/test-backend-override.js"></script> -->

    <!-- Recovery Key Modal -->
    <div id="recovery-modal" class="rk-modal" hidden>
      <div class="rk-card" role="dialog" aria-modal="true" aria-labelledby="rk-title">
        <h3 id="rk-title">Your Recovery Key</h3>
        <p class="rk-sub">Store this securely. We cannot recover it if lost.</p>

        <div class="rk-key" id="rk-key" tabindex="0" aria-label="Recovery key"></div>

        <div class="rk-actions">
          <button id="rk-copy" class="button">Copy</button>
          <button id="rk-download" class="button">Download .txt</button>
          <button id="rk-close" class="button primary">Done</button>
        </div>
      </div>
    </div>

    <!-- Floating Chat Widget Container -->
    <div id="wdp-chat-floating"></div>

</body>
</html>
